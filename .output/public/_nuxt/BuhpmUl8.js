import{r as c,g as D,c as i,a as e,b as O,d as S,F as b,k as f,w as L,I as V,A as M,o as r,t as o,q as g,i as p,m as y,C as R}from"./qcAyaCsh.js";import{fetchLeadsApi as P,deleteLeadApi as U,updateLeadApi as $,createLeadApi as z}from"./B3Fs0kR7.js";const j={class:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950"},q={class:"app-header relative backdrop-blur-2xl border-b border-slate-800/70 p-4"},B={class:"relative flex items-center justify-between"},F={class:"p-6"},Y={class:"bg-slate-900/60 border border-slate-800/60 rounded-2xl shadow-2xl backdrop-blur-xl overflow-hidden"},Q={key:0,class:"p-10 text-center text-slate-300"},G={key:1,class:"overflow-x-auto"},K={class:"min-w-full text-sm"},H={class:"divide-y divide-slate-800/70 text-slate-200"},J={class:"px-4 py-3 font-medium"},W={class:"px-4 py-3"},X={class:"px-4 py-3 text-slate-300"},Z={class:"px-4 py-3 text-slate-300"},ee={class:"px-4 py-3"},te={class:"px-4 py-3 text-xs text-slate-400"},le={class:"px-4 py-3"},ae={class:"flex items-center justify-end gap-2"},se=["onClick"],oe=["onClick"],ie={class:"space-y-4"},re={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ne=["value"],de={class:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-3"},ue=["onClick"],ce={class:"text-left"},pe={class:"text-sm font-medium"},xe={class:"text-[11px] text-slate-400"},me={class:"flex justify-end gap-2"},ge={__name:"index",setup(ve){const x=c([]),n=c(!1),d=c(!1),s=c({id:null,name:"",email:"",phone:"",origin:"INDICACAO",type:"CLIENT"}),{success:m,error:u}=M(),_=[{value:"CLIENT",label:"Cliente",description:"Leads interessados nos serviços da FourCon.",icon:"fa-solid fa-user-check text-emerald-400"},{value:"ANALYST_CANDIDATE",label:"Possível Analista",description:"Profissionais para composição dos times de gerentes.",icon:"fa-solid fa-people-arrows text-amber-400"}],h=[{value:"INDICACAO",label:"Indicação"},{value:"EVENTO",label:"Evento"},{value:"SITE",label:"Site / Landing Page"},{value:"ANUNCIO",label:"Anúncio Pago"},{value:"SOCIAL_MEDIA",label:"Redes Sociais"},{value:"PARCERIA",label:"Parceria"},{value:"COLD_CALL",label:"Cold Call"},{value:"EMAIL_MARKETING",label:"Email Marketing"},{value:"RETORNO_CLIENTE",label:"Retorno de Cliente"},{value:"OUTROS",label:"Outros"}];async function v(){try{x.value=await P()}catch(a){console.error("Erro ao carregar leads:",a),u("Não foi possível carregar os leads")}}function C(a=null){a?(s.value={id:a.id,name:a.name,email:a.email,phone:a.phone||"",origin:a.origin||"INDICACAO",type:a.type||"CLIENT"},d.value=!0):(s.value={id:null,name:"",email:"",phone:"",origin:"INDICACAO",type:"CLIENT"},d.value=!1),n.value=!0}function w(){n.value=!1}async function N(){try{if(!s.value.name.trim()){u("Nome é obrigatório");return}if(!s.value.email.trim()){u("Email é obrigatório");return}const a={name:s.value.name.trim(),email:s.value.email.trim(),phone:s.value.phone?.trim()||void 0,origin:s.value.origin,type:s.value.type};d.value&&s.value.id?(await $(s.value.id,a),m("Lead atualizado com sucesso")):(await z(a),m("Lead cadastrado com sucesso")),n.value=!1,await v()}catch(a){console.error("Erro ao salvar lead:",a),u(a?.data?.error||"Não foi possível salvar o lead")}}async function k(a){if(confirm(`Deseja excluir o lead ${a.name}?`))try{await U(a.id),m("Lead removido"),await v()}catch(t){console.error("Erro ao excluir lead:",t),u("Não foi possível excluir o lead")}}function E(a){if(!a)return"-";try{return new Date(a).toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric"})}catch{return a}}function I(a){return a==="ANALYST_CANDIDATE"?"Possível Analista":"Cliente"}function T(a){if(!a)return"-";const t=h.find(l=>l.value===a);return t?t.label:a}return D(()=>{v()}),(a,t)=>(r(),i("div",j,[e("header",q,[t[8]||(t[8]=e("div",{class:"absolute inset-0 bg-white/5 blur-3xl opacity-10"},null,-1)),e("div",B,[t[7]||(t[7]=e("div",{class:"space-y-1"},[e("h1",{class:"app-header-title"},"Cadastro de Leads"),e("p",{class:"app-header-subtitle"}," Registre, qualifique e acompanhe leads para alimentar seus processos internos. ")],-1)),e("button",{class:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-medium shadow-lg shadow-indigo-500/30 transition-colors",onClick:t[0]||(t[0]=l=>C())},[...t[6]||(t[6]=[e("i",{class:"fa-solid fa-user-plus"},null,-1),S(" Novo Lead ",-1)])])])]),e("main",F,[e("div",Y,[x.value.length===0?(r(),i("div",Q,[...t[9]||(t[9]=[e("i",{class:"fa-solid fa-address-card text-4xl text-indigo-400 mb-4"},null,-1),e("p",{class:"text-lg font-semibold"},"Nenhum lead cadastrado ainda",-1),e("p",{class:"text-sm text-slate-400"}," Clique em “Novo Lead” para iniciar o relacionamento com seus clientes e analistas. ",-1)])])):(r(),i("div",G,[e("table",K,[t[12]||(t[12]=e("thead",{class:"bg-slate-900/70 text-slate-400 uppercase text-xs tracking-wide"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left"},"Nome"),e("th",{class:"px-4 py-3 text-left"},"Email"),e("th",{class:"px-4 py-3 text-left"},"Telefone"),e("th",{class:"px-4 py-3 text-left"},"Origem"),e("th",{class:"px-4 py-3 text-left"},"Qualificação"),e("th",{class:"px-4 py-3 text-left"},"Criado em"),e("th",{class:"px-4 py-3 text-right"},"Ações")])],-1)),e("tbody",H,[(r(!0),i(b,null,f(x.value,l=>(r(),i("tr",{key:l.id,class:"hover:bg-slate-900/40 transition-colors"},[e("td",J,o(l.name),1),e("td",W,o(l.email),1),e("td",X,o(l.phone||"-"),1),e("td",Z,o(T(l.origin)),1),e("td",ee,[e("span",{class:g([l.type==="ANALYST_CANDIDATE"?"bg-amber-500/20 text-amber-300":"bg-emerald-500/20 text-emerald-300","inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium"])},o(I(l.type)),3)]),e("td",te,o(E(l.createdAt)),1),e("td",le,[e("div",ae,[e("button",{class:"p-2 rounded-lg bg-slate-800/80 text-slate-300 hover:text-white hover:bg-slate-700",onClick:A=>C(l),title:"Editar"},[...t[10]||(t[10]=[e("i",{class:"fa-solid fa-pen"},null,-1)])],8,se),e("button",{class:"p-2 rounded-lg bg-red-900/40 text-red-300 hover:text-white hover:bg-red-600/60",onClick:A=>k(l),title:"Excluir"},[...t[11]||(t[11]=[e("i",{class:"fa-solid fa-trash"},null,-1)])],8,oe)])])]))),128))])])]))])]),O(V,{modelValue:n.value,"onUpdate:modelValue":t[5]||(t[5]=l=>n.value=l),title:d.value?"Editar Lead":"Novo Lead",size:"md","z-index":90},{footer:L(()=>[e("div",me,[e("button",{class:"px-4 py-2 rounded-xl bg-slate-800/80 text-slate-200 hover:bg-slate-700 text-sm",onClick:w}," Cancelar "),e("button",{class:"px-4 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-500 text-sm shadow-lg shadow-indigo-500/30",onClick:N},o(d.value?"Atualizar Lead":"Salvar Lead"),1)])]),default:L(()=>[e("div",ie,[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-xs text-slate-300 uppercase tracking-wide"},"Nome *",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>s.value.name=l),type:"text",class:"mt-1 w-full rounded-xl bg-slate-900/80 border border-slate-700/60 text-slate-100 px-3 py-2 focus:border-indigo-500 focus:outline-none",placeholder:"Nome do lead"},null,512),[[y,s.value.name]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-xs text-slate-300 uppercase tracking-wide"},"Email *",-1)),p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>s.value.email=l),type:"email",class:"mt-1 w-full rounded-xl bg-slate-900/80 border border-slate-700/60 text-slate-100 px-3 py-2 focus:border-indigo-500 focus:outline-none",placeholder:"email@exemplo.com"},null,512),[[y,s.value.email]])]),e("div",re,[e("div",null,[t[15]||(t[15]=e("label",{class:"block text-xs text-slate-300 uppercase tracking-wide"},"Telefone",-1)),p(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>s.value.phone=l),type:"text",class:"mt-1 w-full rounded-xl bg-slate-900/80 border border-slate-700/60 text-slate-100 px-3 py-2 focus:border-indigo-500 focus:outline-none",placeholder:"(00) 00000-0000"},null,512),[[y,s.value.phone]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-xs text-slate-300 uppercase tracking-wide"},"Origem *",-1)),p(e("select",{"onUpdate:modelValue":t[4]||(t[4]=l=>s.value.origin=l),class:"mt-1 w-full rounded-xl bg-slate-900/80 border border-slate-700/60 text-slate-100 px-3 py-2 focus:border-indigo-500 focus:outline-none"},[(r(),i(b,null,f(h,l=>e("option",{key:l.value,value:l.value},o(l.label),9,ne)),64))],512),[[R,s.value.origin]])])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-xs text-slate-300 uppercase tracking-wide"},"Qualificação *",-1)),e("div",de,[(r(),i(b,null,f(_,l=>e("button",{key:l.value,type:"button",onClick:A=>s.value.type=l.value,class:g(["flex items-center gap-2 px-3 py-2 rounded-xl border transition-all",s.value.type===l.value?"border-emerald-500 bg-emerald-500/10 text-emerald-200":"border-slate-700/60 bg-slate-900/60 text-slate-300 hover:border-emerald-500/60"])},[e("i",{class:g(l.icon)},null,2),e("div",ce,[e("p",pe,o(l.label),1),e("p",xe,o(l.description),1)])],10,ue)),64))])])])]),_:1},8,["modelValue","title"])]))}};export{ge as default};
