import{isApiEnabled as a,apiFetch as n}from"./Dbx-Jqc8.js";async function S(){if(!a())return["Pendente","Em an치lise","Aprovado","Reprovado","Arquivado"];try{const t=await n("/api/v1/statuses");return Array.isArray(t)&&t.length?t:["Pendente","Em an치lise","Aprovado","Reprovado","Arquivado"]}catch{return["Pendente","Em an치lise","Aprovado","Reprovado","Arquivado"]}}async function m(t){if(!a())return[];try{const s=t?`/api/v1/statuses/detailed?category=${t}`:"/api/v1/statuses/detailed",i=await n(s);return Array.isArray(i)?i:[]}catch{return[]}}async function A(t){if(!a())return null;try{return await n("/api/v1/statuses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}catch{return null}}async function b(t,s){if(!a())return null;try{return await n(`/api/v1/statuses/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})}catch{return null}}async function T(t){if(!a())return!1;try{return await n(`/api/v1/statuses/${t}`,{method:"DELETE"}),!0}catch{return!1}}const E=[{value:"ESTEIRA",label:"Esteira"},{value:"USUARIOS",label:"Usu치rios"},{value:"SISTEMA",label:"Sistema"}];async function g(t){if(!a()||!t)return[];try{return await n(`/api/v1/stages/${encodeURIComponent(t)}/fields`)}catch{return[]}}async function U(t,s){if(!a()||!t)return;const i=(s||[]).map((r,c)=>({id:r.id,stageId:t,label:r.label,type:r.type,required:!!r.required,placeholder:r.placeholder||"",options:Array.isArray(r.options)?r.options:[],order:typeof r.order=="number"?r.order:c}));try{await n(`/api/v1/stages/${encodeURIComponent(t)}/fields`,{method:"PUT",body:i})}catch{}}async function p(t){if(!a())return[];try{return await n(`/api/v1/processes/${encodeURIComponent(t)}/stages`)}catch{return[]}}async function d(t,s){if(!a())return[];try{return await n(`/api/v1/processes/${encodeURIComponent(t)}/stages`,{method:"PUT",body:s||[]})}catch{return[]}}async function f(t,s,i){if(!a())return i;try{const r=await p(t),c=i.map((e,o)=>{const y=e.id&&(e.id.startsWith("temp_")||e.id.match(/^\d+$/));let u=null;return!y&&e.id&&(u=r.find(l=>l.id===e.id)),u||(u=r.find(l=>l.title===e.title)),!u&&o<r.length&&(u=r[o]),{id:u?.id,title:e.title,slaDays:e.slaDays,color:e.color,defaultStatus:e.defaultStatus||u?.defaultStatus||"",order:o}});return await d(t,c)}catch(r){return console.error("Error preserving stage IDs:",r),await d(t,i)}}async function h(t,s){if(!a())return!1;try{const i=await p(t),r=new Map(s.map(e=>[e.id,e.order])),c=i.map(e=>({id:e.id,title:e.title,slaDays:e.slaDays,color:e.color,defaultStatus:e.defaultStatus,order:r.get(e.id)??0})).sort((e,o)=>e.order-o.order).map((e,o)=>({...e,order:o}));return await d(t,c),!0}catch{return!1}}const R=Object.freeze(Object.defineProperty({__proto__:null,fetchStagesApi:p,saveStagesApi:d,saveStagesPreservingIdsApi:f,updateStagesOrderApi:h},Symbol.toStringTag,{value:"Module"}));export{E as S,p as a,g as b,A as c,T as d,U as e,m as f,S as g,h,R as i,f as s,b as u};
