const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BFT2zYfe.js","./Dbx-Jqc8.js","./CPKTtwfv.js","./entry.CkufVRed.css","./B74M8xGS.js"])))=>i.map(i=>d[i]);
import{_ as Oe,r as b,i as O,h as ve,k as ne,o as a,b as Y,w as re,c as n,m as k,a as e,t as w,B as ke,n as A,F as le,j as ce,d as z,p as X,y as oe,J as ba,T as xa,K as ya,e as Ht,L as $a,z as _e,D as Bt,M as Or,N as Wt,f as et,v as $t,I as ka,O as Fe,A as je,u as _a,P as wa,g as Va,Q as Ca,R as Sa,q as Nt,S as Ia,x as Ae,U as Pa,C as it}from"./CPKTtwfv.js";import{_ as Aa}from"./CCntQfpG.js";import{s as Yt}from"./BWJBdaIx.js";import{isApiEnabled as ee,apiFetch as Ve}from"./Dbx-Jqc8.js";import{g as Fa,f as Rt,b as zt,s as Ba}from"./BFT2zYfe.js";import"./B74M8xGS.js";const Qt=r=>`pipeline_proposals__${r}`;function Da(r,F){try{return r?JSON.parse(r):F}catch{return F}}function jt(r){if(ee())try{return[]}catch{return[]}if(typeof localStorage>"u")return[];const F=Yt(r);return Da(localStorage.getItem(Qt(F)),[])}function kt(r,F){if(ee()||typeof localStorage>"u")return;const m=Yt(r);localStorage.setItem(Qt(m),JSON.stringify(F||[]))}async function _t(r){if(!ee())return[];try{return(await Ve(`/api/v1/processes/${encodeURIComponent(r)}/proposals`)||[]).map(m=>({id:m.id,name:m.name,amount:Number(m.amount||0),stageId:m.stageId,status:m.status||"Pendente",isArchived:!!m.archived,stageEnteredAt:m.stageEnteredAt,details:m.details||{}}))}catch{return[]}}async function Tt(r,F){if(!ee())return null;try{const m={name:F.name,amount:F.amount,stageId:F.stageId,status:F.status},C=await Ve(`/api/v1/processes/${encodeURIComponent(r)}/proposals`,{method:"POST",body:m});return{id:C.id,name:C.name,amount:Number(C.amount||0),stageId:C.stageId,status:C.status||"Pendente",isArchived:!!C.archived,stageEnteredAt:C.stageEnteredAt,details:C.details||{}}}catch{return null}}async function Ea(r,F){if(!ee())return{};try{return await Ve(`/api/v1/processes/${encodeURIComponent(r)}/proposals/${encodeURIComponent(F)}/forms`)}catch{return{}}}async function Ot(r,F,m,C){if(!ee())return C||{};try{return await Ve(`/api/v1/processes/${encodeURIComponent(r)}/proposals/${encodeURIComponent(F)}/forms/${encodeURIComponent(m)}`,{method:"PUT",body:{values:C||{}}})}catch{return C||{}}}async function Lt(r,F,m){if(!ee())return null;try{const C={};m.stageId&&(C.stageId=m.stageId),typeof m.amount=="number"&&(C.amount=m.amount),m.status&&(C.status=m.status),m.name&&(C.name=m.name);const y=await Ve(`/api/v1/processes/${encodeURIComponent(r)}/proposals/${encodeURIComponent(String(F))}`,{method:"PUT",body:C});return{id:y.id,name:y.name,amount:Number(y.amount||0),stageId:y.stageId,status:y.status||"Pendente",isArchived:!!y.archived,stageEnteredAt:y.stageEnteredAt,details:y.details||{}}}catch{return null}}async function qa(r,F){if(!ee())return!1;try{return await Ve(`/api/v1/processes/${encodeURIComponent(r)}/proposals/${encodeURIComponent(String(F))}`,{method:"DELETE"}),!0}catch{return!1}}const Ma={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},Ua={class:"flex items-center justify-between px-3 py-2 border-b border-slate-700/60 bg-gradient-to-r from-slate-900/60 to-slate-800/40"},Na={class:"flex items-center gap-2"},Ra={class:"text-[13px] font-semibold tracking-wide"},za={key:1,class:"mt-2 grid grid-cols-3 gap-2"},ja=["href"],Ta=["src","alt"],Oa=["href"],La={key:0,class:"flex justify-start"},Ga={class:"border-t border-slate-700/60 p-2 flex items-center gap-2 bg-slate-900/30"},Ja=["multiple","accept"],Ka=["placeholder","onKeydown"],Ha=["disabled"],Wa={key:0,class:"px-3 pb-2"},Ya={class:"grid grid-cols-4 gap-2"},Qa=["src","alt"],Za={key:1,class:"w-full h-20 text-[11px] p-2 rounded-xl border border-slate-700 bg-slate-700/40 flex items-center justify-center text-center break-all shadow"},Xa=["onClick"],el={__name:"ChatModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"ConsorIA"},messages:{type:Array,default:()=>[]},typing:{type:Boolean,default:!1},size:{type:String,default:"sm"},placeholder:{type:String,default:"Pergunte sobre seu consórcio…"},accept:{type:String,default:"image/*,application/pdf,application/*,text/*"},allowFileUpload:{type:Boolean,default:!0},allowPaste:{type:Boolean,default:!0},allowDrop:{type:Boolean,default:!0},allowMultiple:{type:Boolean,default:!0}},emits:["update:show","send","close"],setup(r,{expose:F,emit:m}){const C=r,y=m,S=b(""),f=b([]),I=b(null),d=b(null),c=O({get:()=>C.show,set:u=>y("update:show",u)}),g=O(()=>{switch(C.size){case"xs":return"sm:max-w-[20rem] md:max-w-sm";case"md":return"sm:max-w-md md:max-w-lg";case"lg":return"sm:max-w-lg md:max-w-xl";default:return"sm:max-w-sm md:max-w-md"}});ve(()=>C.messages?.length,()=>j());function j(){requestAnimationFrame(()=>{const u=I.value;u&&(u.scrollTop=u.scrollHeight)})}function J(){y("update:show",!1),y("close")}function L(){d.value?.click()}function B(u){const l=Array.from(u?.target?.files||[]);W(l),u?.target&&(u.target.value="")}function N(u){const v=Array.from(u.clipboardData?.items||[]).filter(h=>h.kind==="file").map(h=>h.getAsFile()).filter(Boolean);v.length&&W(v)}function T(u){const l=Array.from(u.dataTransfer?.files||[]);l.length&&W(l)}function W(u){u.forEach(l=>{try{const v=URL.createObjectURL(l);f.value.push({name:l.name,type:l.type||"application/octet-stream",url:v,size:l.size||0})}catch{}}),j()}function te(u){const l=f.value[u];l?.url&&URL.revokeObjectURL(l.url),f.value.splice(u,1)}function U(){const u=S.value.trim();!u&&f.value.length===0||(y("send",{text:u,attachments:[...f.value]}),S.value="",f.value.forEach(l=>l.url&&URL.revokeObjectURL(l.url)),f.value=[],j())}return F({openPicker:L,nextTickScroll:j}),(u,l)=>(a(),ne(ya,{to:"body"},[Y(xa,{name:"fade"},{default:re(()=>[c.value?(a(),n("div",Ma,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-[2px]",onClick:J}),e("div",{class:A(["relative z-10 bg-slate-800/90 text-white overflow-hidden flex flex-col w-full h-full rounded-none sm:w-auto sm:h-auto sm:max-h-[85vh] sm:rounded-2xl border border-slate-700/60 shadow-2xl backdrop-blur-md",g.value])},[e("div",Ua,[e("div",Na,[l[4]||(l[4]=e("i",{class:"fa-solid fa-robot text-cyan-400 text-base drop-shadow"},null,-1)),e("h3",Ra,w(r.title),1)]),e("button",{class:"text-slate-300 hover:text-white p-1 rounded-lg hover:bg-white/5 transition-colors",onClick:J,"aria-label":"Fechar"},[...l[5]||(l[5]=[e("i",{class:"fa-solid fa-xmark text-sm"},null,-1)])])]),e("div",{ref_key:"chatScrollRef",ref:I,class:A(["flex-1 overflow-y-auto px-3 py-2 space-y-2",{"drag-target":r.allowDrop}]),onDragover:l[0]||(l[0]=ke(v=>r.allowDrop&&!0,["prevent"])),onDrop:l[1]||(l[1]=ke(v=>r.allowDrop&&T,["prevent"]))},[(a(!0),n(le,null,ce(r.messages,(v,h)=>(a(),n("div",{key:h,class:A(["flex",v.role==="user"?"justify-end":"justify-start"])},[e("div",{class:A(["rounded-2xl px-3 py-2 max-w-[80%] text-[12px] leading-snug shadow-md",v.role==="user"?"bg-gradient-to-br from-cyan-500 to-blue-600 text-white":"bg-gradient-to-br from-slate-700/80 to-slate-800/80 text-slate-100 border border-slate-600/40"])},[v.content&&v.content.length?(a(),n(le,{key:0},[z(w(v.content),1)],64)):k("",!0),v.attachments?.length?(a(),n("div",za,[(a(!0),n(le,null,ce(v.attachments,(M,H)=>(a(),n(le,{key:H},[M.type?.startsWith("image/")?(a(),n("a",{key:0,href:M.url,target:"_blank",rel:"noreferrer",class:"block"},[e("img",{src:M.url,alt:M.name,class:"w-full h-20 object-cover rounded-xl shadow"},null,8,Ta)],8,ja)):(a(),n("a",{key:1,href:M.url,target:"_blank",rel:"noreferrer",class:"text-[11px] underline break-all"},w(M.name||M.url),9,Oa))],64))),128))])):k("",!0)],2)],2))),128)),r.typing?(a(),n("div",La,[...l[6]||(l[6]=[e("div",{class:"rounded-2xl px-3 py-2 max-w-[80%] bg-gradient-to-br from-slate-700/70 to-slate-800/70 border border-slate-600/30 shadow-md text-[12px] text-slate-200 flex items-center gap-1"},[e("span",null,"escrevendo"),e("span",{class:"typing-dots","aria-hidden":"true"},[e("span",{class:"dot"}),e("span",{class:"dot"}),e("span",{class:"dot"})])],-1)])])):k("",!0)],34),e("div",Ga,[r.allowFileUpload?(a(),n("input",{key:0,ref_key:"chatFileInput",ref:d,type:"file",class:"hidden",multiple:r.allowMultiple,accept:r.accept,onChange:B},null,40,Ja)):k("",!0),r.allowFileUpload?(a(),n("button",{key:1,class:"bg-slate-700/70 hover:bg-slate-700 text-slate-200 px-2 h-9 rounded-lg text-xs shadow",title:"Anexar arquivos",onClick:L},[...l[7]||(l[7]=[e("i",{class:"fa-solid fa-paperclip"},null,-1)])])):k("",!0),X(e("input",{"onUpdate:modelValue":l[2]||(l[2]=v=>S.value=v),type:"text",class:"flex-1 bg-slate-700/70 border border-slate-600/60 rounded-xl h-9 px-3 text-[13px] outline-none focus:ring-[1.5px] focus:ring-cyan-400/60 focus:border-cyan-400/50 shadow-inner",placeholder:r.placeholder,onKeydown:ba(ke(U,["prevent"]),["enter"]),onPaste:l[3]||(l[3]=v=>r.allowPaste?N:void 0)},null,40,Ka),[[oe,S.value]]),e("button",{class:"bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-500 hover:to-cyan-600 text-white px-3 h-9 rounded-lg text-sm disabled:opacity-50 shadow",disabled:!S.value.trim()&&f.value.length===0,onClick:U}," Enviar ",8,Ha)]),f.value.length?(a(),n("div",Wa,[l[9]||(l[9]=e("div",{class:"text-[11px] text-slate-400 mb-1"}," Anexos prontos para enviar ",-1)),e("div",Ya,[(a(!0),n(le,null,ce(f.value,(v,h)=>(a(),n("div",{key:h,class:"relative group"},[v.type.startsWith("image/")?(a(),n("img",{key:0,src:v.url,alt:v.name,class:"w-full h-20 object-cover rounded-xl border border-slate-700 shadow"},null,8,Qa)):(a(),n("div",Za,w(v.name),1)),e("button",{class:"absolute -top-2 -right-2 bg-slate-800 border border-slate-600 text-white rounded-full w-5 h-5 opacity-80 hover:opacity-100 shadow",onClick:M=>te(h),"aria-label":"Remover anexo"},[...l[8]||(l[8]=[e("i",{class:"fa-solid fa-xmark text-[10px]"},null,-1)])],8,Xa)]))),128))])])):k("",!0)],2)])):k("",!0)]),_:1})]))}},tl=Oe(el,[["__scopeId","data-v-f93c5a67"]]),al=["for"],ll=["id","disabled","required"],sl={key:0,value:""},ol=["value"],nl={key:1,class:"select-error"},il=Ht({__name:"BaseSelect",props:{modelValue:{},options:{default:()=>[]},label:{},placeholder:{default:"Selecione"},size:{default:"xs"},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},errorMessage:{default:""}},emits:["update:modelValue"],setup(r,{emit:F}){const m=r,C=F,y=$a(),S=O({get:()=>m.modelValue??"",set:c=>C("update:modelValue",c)}),f=O(()=>[]),I=O(()=>[`select-container--${m.size}`]),d=O(()=>[`select-field--${m.size}`]);return(c,g)=>(a(),n("div",{class:A(["select-wrapper",f.value])},[c.label?(a(),n("label",{key:0,for:_e(y),class:"select-label"},w(c.label),9,al)):k("",!0),e("div",{class:A(["select-container",I.value])},[X(e("select",{id:_e(y),class:A(["select-field",d.value]),disabled:c.disabled,required:c.required,"onUpdate:modelValue":g[0]||(g[0]=j=>S.value=j)},[c.placeholder?(a(),n("option",sl,w(c.placeholder),1)):k("",!0),(a(!0),n(le,null,ce(c.options,j=>(a(),n("option",{key:String(j.value),value:j.value},w(j.label),9,ol))),128))],10,ll),[[Bt,S.value]])],2),c.errorMessage?(a(),n("p",nl,w(c.errorMessage),1)):k("",!0)],2))}}),Ct=Oe(il,[["__scopeId","data-v-a96e7700"]]);const rl={class:"fd-wrapper"},dl={key:0,class:"fd-label"},ul=["multiple","accept"],cl={key:1,class:"fd-list"},pl={class:"fd-name"},vl={class:"fd-size"},fl=["onClick"],ml={key:2,class:"fd-error"},gl=Ht({__name:"FileDrop",props:{label:{default:""},multiple:{type:Boolean,default:!0},accept:{default:""},error:{default:""}},emits:["files"],setup(r,{emit:F}){const m=r,C=F,y=b(null),S=b(!1),f=b([]),I=()=>y.value?.click(),d=N=>{const T=N.target;T.files&&(J(Array.from(T.files)),T.value="")},c=()=>S.value=!0,g=()=>S.value=!1,j=N=>{S.value=!1;const T=N.dataTransfer?.files;T&&J(Array.from(T))};function J(N){const T=m.multiple?[...f.value,...N]:N.length?[N[0]]:[];f.value=T,C("files",T)}const L=N=>{f.value.splice(N,1),C("files",f.value)},B=N=>{if(!N)return"0 B";const T=["B","KB","MB","GB"],W=Math.floor(Math.log(N)/Math.log(1024));return`${(N/Math.pow(1024,W)).toFixed(1)} ${T[W]}`};return(N,T)=>(a(),n("div",rl,[N.label?(a(),n("label",dl,w(N.label),1)):k("",!0),e("div",{class:A(["fd-area",{"fd-area--drag":_e(S)}]),onDragover:ke(c,["prevent"]),onDragleave:ke(g,["prevent"]),onDrop:ke(j,["prevent"]),onClick:I},[Wt(N.$slots,"icon",{},()=>[T[0]||(T[0]=e("i",{class:"fa-solid fa-cloud-arrow-up text-2xl text-slate-400"},null,-1))],!0),T[1]||(T[1]=e("div",{class:"fd-text"},[e("span",{class:"fd-title font-medium"},"Arraste e solte seus arquivos"),e("span",{class:"fd-sub"},"ou clique para selecionar")],-1)),e("input",{ref_key:"input",ref:y,type:"file",class:"hidden",multiple:N.multiple,accept:N.accept,onChange:d},null,40,ul)],34),_e(f).length?(a(),n("ul",cl,[(a(!0),n(le,null,ce(_e(f),(W,te)=>(a(),n("li",{key:te,class:"fd-item"},[e("span",pl,w(W.name),1),e("span",vl,w(B(W.size)),1),e("button",{type:"button",class:"fd-remove",onClick:ke(U=>L(te),["stop"])}," Remover ",8,fl)]))),128))])):k("",!0),N.error?(a(),n("p",ml,w(N.error),1)):k("",!0)]))}}),Gt=Oe(gl,[["__scopeId","data-v-edd41708"]]),hl=["for"],bl={key:0,class:"text-red-500"},xl=["id","placeholder","required","disabled"],yl={class:"input-suffix"},$l={key:0,class:"fa-solid fa-check text-green-500 input-icon"},kl={key:1,class:"fa-solid fa-times text-red-500 input-icon"},_l={key:2,class:"fa-solid fa-spinner fa-spin text-slate-400 input-icon"},wl={key:1,class:"input-help"},Vl={key:0,class:"input-error"},Cl={key:1,class:"text-[10px] text-slate-400 mt-1"},Sl={class:"space-y-0.5"},Il={key:0,class:"fa-solid fa-check mr-1"},Pl={key:1,class:"fa-solid fa-times mr-1"},Al={key:0,class:"fa-solid fa-check mr-1"},Fl={key:1,class:"fa-solid fa-times mr-1"},Bl={key:0,class:"fa-solid fa-check mr-1"},Dl={key:1,class:"fa-solid fa-times mr-1"},St={__name:"CpfInput",props:{modelValue:{type:String,default:""},label:{type:String,default:""},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},showValidationInfo:{type:Boolean,default:!1}},emits:["update:modelValue","validation"],setup(r,{emit:F}){const m=r,C=F,y=O(()=>`cpf-${Math.random().toString(36).slice(2,8)}`),S=b(""),f=b(null),I=b(!1),d=b(""),c=b({format:!1,math:!1,antifraude:!1}),g=O(()=>{const u=[];return m.disabled&&u.push("input-wrapper--disabled"),f.value===!1&&u.push("input-wrapper--error"),f.value===!0&&u.push("input-wrapper--success"),u}),j=O(()=>{const u=[];return u.push("input-container--xs"),u.push("input-container--default"),m.disabled&&u.push("input-container--disabled"),f.value===!1&&u.push("input-container--error"),f.value===!0&&u.push("input-container--success"),u});function J(u){const l=u.replace(/\D/g,"");return l.length<=3?l:l.length<=6?`${l.slice(0,3)}.${l.slice(3)}`:l.length<=9?`${l.slice(0,3)}.${l.slice(3,6)}.${l.slice(6)}`:`${l.slice(0,3)}.${l.slice(3,6)}.${l.slice(6,9)}-${l.slice(9,11)}`}function L(u){return u.replace(/\D/g,"")}function B(u){const l=u.replace(/\D/g,"");if(l.length!==11||/^(\d)\1{10}$/.test(l))return!1;let v=0;for(let P=0;P<9;P++)v+=parseInt(l[P])*(10-P);let h=v%11;const M=h<2?0:11-h;if(parseInt(l[9])!==M)return!1;v=0;for(let P=0;P<10;P++)v+=parseInt(l[P])*(11-P);h=v%11;const H=h<2?0:11-h;return parseInt(l[10])===H}function N(u){const l=u.replace(/\D/g,"");if(l.length!==11||["00000000000","11111111111","22222222222","33333333333","44444444444","55555555555","66666666666","77777777777","88888888888","99999999999"].includes(l)||/^(\d{3})\1{2}\d{2}$/.test(l)||/^123456789\d{2}$/.test(l)||/^987654321\d{2}$/.test(l))return!1;let h=!0;for(let M=1;M<11;M++)if(parseInt(l[M])!==parseInt(l[M-1])+1){h=!1;break}if(h)return!1;h=!0;for(let M=1;M<11;M++)if(parseInt(l[M])!==parseInt(l[M-1])-1){h=!1;break}return!h}async function T(u){if(!u.trim())return f.value=null,d.value="",c.value={format:!1,math:!1,antifraude:!1},null;I.value=!0,await new Promise(H=>setTimeout(H,300));const l=L(u),v=/^\d{11}$/.test(l);if(c.value.format=v,!v)return f.value=!1,d.value="CPF deve ter 11 dígitos",I.value=!1,C("validation",{valid:!1,cpf:l,checks:c.value}),!1;const h=B(l);if(c.value.math=h,!h)return f.value=!1,d.value="CPF com dígitos verificadores inválidos",I.value=!1,C("validation",{valid:!1,cpf:l,checks:c.value}),!1;const M=N(l);return c.value.antifraude=M,M?(f.value=!0,d.value="",I.value=!1,C("validation",{valid:!0,cpf:l,checks:c.value}),!0):(f.value=!1,d.value="CPF identificado como inválido ou teste",I.value=!1,C("validation",{valid:!1,cpf:l,checks:c.value}),!1)}function W(u){const l=u.target.value,v=J(l);S.value=v;const h=L(v);C("update:modelValue",h),f.value!==null&&(f.value=null,d.value="")}function te(){T(S.value)}function U(){d.value=""}return ve(()=>m.modelValue,u=>{u!==L(S.value)&&(S.value=J(u||""))},{immediate:!0}),(u,l)=>(a(),n("div",{class:A(["input-wrapper",g.value])},[r.label?(a(),n("label",{key:0,for:y.value,class:"input-label"},[z(w(r.label)+" ",1),r.required?(a(),n("span",bl,"*")):k("",!0)],8,hl)):k("",!0),e("div",{class:A(["input-container",j.value])},[X(e("input",{id:y.value,"onUpdate:modelValue":l[0]||(l[0]=v=>S.value=v),type:"text",placeholder:r.placeholder||"000.000.000-00",required:r.required,disabled:r.disabled,class:"input-field input-field--xs",onInput:W,onBlur:te,onFocus:U,maxlength:"14"},null,40,xl),[[oe,S.value]]),e("div",yl,[f.value===!0?(a(),n("i",$l)):f.value===!1?(a(),n("i",kl)):I.value?(a(),n("i",_l)):k("",!0)])],2),d.value||r.showValidationInfo&&S.value&&f.value!==null?(a(),n("div",wl,[d.value?(a(),n("p",Vl,w(d.value),1)):k("",!0),r.showValidationInfo&&S.value&&f.value!==null?(a(),n("div",Cl,[e("div",Sl,[e("div",{class:A(c.value.format?"text-green-400":"text-red-400")},[c.value.format?(a(),n("i",Il)):(a(),n("i",Pl)),l[1]||(l[1]=z(" Formato válido ",-1))],2),e("div",{class:A(c.value.math?"text-green-400":"text-red-400")},[c.value.math?(a(),n("i",Al)):(a(),n("i",Fl)),l[2]||(l[2]=z(" Dígitos verificadores ",-1))],2),e("div",{class:A(c.value.antifraude?"text-green-400":"text-red-400")},[c.value.antifraude?(a(),n("i",Bl)):(a(),n("i",Dl)),l[3]||(l[3]=z(" Validação antifraude ",-1))],2)])])):k("",!0)])):k("",!0)],2))}},El=["for"],ql={key:0,class:"text-red-500"},Ml=["id","placeholder","required","disabled"],Ul={class:"input-suffix"},Nl={key:0,class:"fa-solid fa-check text-green-500 input-icon"},Rl={key:1,class:"fa-solid fa-times text-red-500 input-icon"},zl={key:2,class:"fa-solid fa-spinner fa-spin text-slate-400 input-icon"},jl={key:1,class:"input-help"},Tl={key:0,class:"input-error"},Ol={key:1,class:"text-[10px] text-slate-400 mt-1"},Ll={class:"space-y-0.5"},Gl={key:0,class:"fa-solid fa-check mr-1"},Jl={key:1,class:"fa-solid fa-times mr-1"},Kl={key:0,class:"fa-solid fa-check mr-1"},Hl={key:1,class:"fa-solid fa-times mr-1"},Wl={key:0,class:"fa-solid fa-check mr-1"},Yl={key:1,class:"fa-solid fa-times mr-1"},Jt={__name:"CnpjInput",props:{modelValue:{type:String,default:""},label:{type:String,default:""},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},showValidationInfo:{type:Boolean,default:!1}},emits:["update:modelValue","validation"],setup(r,{emit:F}){const m=r,C=F,y=O(()=>`cnpj-${Math.random().toString(36).slice(2,8)}`),S=b(""),f=b(null),I=b(!1),d=b(""),c=b({format:!1,math:!1,antifraude:!1}),g=O(()=>{const u=[];return m.disabled&&u.push("input-wrapper--disabled"),f.value===!1&&u.push("input-wrapper--error"),f.value===!0&&u.push("input-wrapper--success"),u}),j=O(()=>{const u=[];return u.push("input-container--xs"),u.push("input-container--default"),m.disabled&&u.push("input-container--disabled"),f.value===!1&&u.push("input-container--error"),f.value===!0&&u.push("input-container--success"),u});function J(u){const l=u.replace(/\D/g,"");return l.length<=2?l:l.length<=5?`${l.slice(0,2)}.${l.slice(2)}`:l.length<=8?`${l.slice(0,2)}.${l.slice(2,5)}.${l.slice(5)}`:l.length<=12?`${l.slice(0,2)}.${l.slice(2,5)}.${l.slice(5,8)}/${l.slice(8)}`:`${l.slice(0,2)}.${l.slice(2,5)}.${l.slice(5,8)}/${l.slice(8,12)}-${l.slice(12,14)}`}function L(u){return u.replace(/\D/g,"")}function B(u){const l=u.replace(/\D/g,"");if(l.length!==14||/^(\d)\1{13}$/.test(l))return!1;let v=0;const h=[5,4,3,2,9,8,7,6,5,4,3,2];for(let E=0;E<12;E++)v+=parseInt(l[E])*h[E];let M=v%11;const H=M<2?0:11-M;if(parseInt(l[12])!==H)return!1;v=0;const P=[6,5,4,3,2,9,8,7,6,5,4,3,2];for(let E=0;E<13;E++)v+=parseInt(l[E])*P[E];M=v%11;const V=M<2?0:11-M;return parseInt(l[13])===V}function N(u){const l=u.replace(/\D/g,"");return!(l.length!==14||["00000000000000","11111111111111","22222222222222","33333333333333","44444444444444","55555555555555","66666666666666","77777777777777","88888888888888","99999999999999"].includes(l)||/^123456789012\d{2}$/.test(l)||/^987654321098\d{2}$/.test(l))}async function T(u){if(!u.trim())return f.value=null,d.value="",c.value={format:!1,math:!1,antifraude:!1},null;I.value=!0,await new Promise(H=>setTimeout(H,300));const l=L(u),v=/^\d{14}$/.test(l);if(c.value.format=v,!v)return f.value=!1,d.value="CNPJ deve ter 14 dígitos",I.value=!1,C("validation",{valid:!1,cnpj:l,checks:c.value}),!1;const h=B(l);if(c.value.math=h,!h)return f.value=!1,d.value="CNPJ com dígitos verificadores inválidos",I.value=!1,C("validation",{valid:!1,cnpj:l,checks:c.value}),!1;const M=N(l);return c.value.antifraude=M,M?(f.value=!0,d.value="",I.value=!1,C("validation",{valid:!0,cnpj:l,checks:c.value}),!0):(f.value=!1,d.value="CNPJ identificado como inválido ou teste",I.value=!1,C("validation",{valid:!1,cnpj:l,checks:c.value}),!1)}function W(u){const l=u.target.value,v=J(l);S.value=v;const h=L(v);C("update:modelValue",h),f.value!==null&&(f.value=null,d.value="")}function te(){T(S.value)}function U(){d.value=""}return ve(()=>m.modelValue,u=>{u!==L(S.value)&&(S.value=J(u||""))},{immediate:!0}),(u,l)=>(a(),n("div",{class:A(["input-wrapper",g.value])},[r.label?(a(),n("label",{key:0,for:y.value,class:"input-label"},[z(w(r.label)+" ",1),r.required?(a(),n("span",ql,"*")):k("",!0)],8,El)):k("",!0),e("div",{class:A(["input-container",j.value])},[X(e("input",{id:y.value,"onUpdate:modelValue":l[0]||(l[0]=v=>S.value=v),type:"text",placeholder:r.placeholder||"00.000.000/0000-00",required:r.required,disabled:r.disabled,class:"input-field input-field--xs",onInput:W,onBlur:te,onFocus:U,maxlength:"18"},null,40,Ml),[[oe,S.value]]),e("div",Ul,[f.value===!0?(a(),n("i",Nl)):f.value===!1?(a(),n("i",Rl)):I.value?(a(),n("i",zl)):k("",!0)])],2),d.value||r.showValidationInfo&&S.value&&f.value!==null?(a(),n("div",jl,[d.value?(a(),n("p",Tl,w(d.value),1)):k("",!0),r.showValidationInfo&&S.value&&f.value!==null?(a(),n("div",Ol,[e("div",Ll,[e("div",{class:A(c.value.format?"text-green-400":"text-red-400")},[c.value.format?(a(),n("i",Gl)):(a(),n("i",Jl)),l[1]||(l[1]=z(" Formato válido ",-1))],2),e("div",{class:A(c.value.math?"text-green-400":"text-red-400")},[c.value.math?(a(),n("i",Kl)):(a(),n("i",Hl)),l[2]||(l[2]=z(" Dígitos verificadores ",-1))],2),e("div",{class:A(c.value.antifraude?"text-green-400":"text-red-400")},[c.value.antifraude?(a(),n("i",Wl)):(a(),n("i",Yl)),l[3]||(l[3]=z(" Validação antifraude ",-1))],2)])])):k("",!0)])):k("",!0)],2))}},Ql=["for"],Zl={key:0,class:"text-red-500"},Xl=["id","placeholder","required","disabled"],es={class:"input-suffix"},ts={key:0,class:"fa-solid fa-check text-green-500 input-icon"},as={key:1,class:"fa-solid fa-times text-red-500 input-icon"},ls={key:2,class:"fa-solid fa-spinner fa-spin text-slate-400 input-icon"},ss={key:1,class:"input-help"},os={key:0,class:"input-error"},ns={key:1,class:"text-[10px] text-slate-400 mt-1"},is={class:"space-y-0.5"},rs={key:0,class:"fa-solid fa-check mr-1"},ds={key:1,class:"fa-solid fa-times mr-1"},us={key:0,class:"fa-solid fa-check mr-1"},cs={key:1,class:"fa-solid fa-times mr-1"},ps={key:0,class:"fa-solid fa-check mr-1"},vs={key:1,class:"fa-solid fa-times mr-1"},It={__name:"RgInput",props:{modelValue:{type:String,default:""},label:{type:String,default:""},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},showValidationInfo:{type:Boolean,default:!1}},emits:["update:modelValue","validation"],setup(r,{emit:F}){const m=r,C=F,y=O(()=>`rg-${Math.random().toString(36).slice(2,8)}`),S=b(""),f=b(null),I=b(!1),d=b(""),c=b({format:!1,length:!1,pattern:!1}),g=O(()=>{const U=[];return m.disabled&&U.push("input-wrapper--disabled"),f.value===!1&&U.push("input-wrapper--error"),f.value===!0&&U.push("input-wrapper--success"),U}),j=O(()=>{const U=[];return U.push("input-container--xs"),U.push("input-container--default"),m.disabled&&U.push("input-container--disabled"),f.value===!1&&U.push("input-container--error"),f.value===!0&&U.push("input-container--success"),U});function J(U){const u=U.replace(/[^\dA-Za-z]/g,"").toUpperCase();return u.length<=2?u:u.length<=5?`${u.slice(0,2)}.${u.slice(2)}`:u.length<=8?`${u.slice(0,2)}.${u.slice(2,5)}.${u.slice(5)}`:`${u.slice(0,2)}.${u.slice(2,5)}.${u.slice(5,8)}-${u.slice(8,9)}`}function L(U){return U.replace(/[^\dA-Za-z]/g,"").toUpperCase()}function B(U){const u=L(U),l=/^[0-9]{8}[0-9A-Z]?$/.test(u),v=u.length>=7&&u.length<=9,h=!/^(\d)\1+$/.test(u)&&u!=="000000000";return{format:l,length:v,pattern:h}}async function N(U){if(!U.trim())return f.value=null,d.value="",c.value={format:!1,length:!1,pattern:!1},null;I.value=!0,await new Promise(h=>setTimeout(h,200));const u=L(U),l=B(U);c.value=l;const v=l.format&&l.length&&l.pattern;return l.length?l.format?l.pattern?(f.value=!0,d.value=""):(f.value=!1,d.value="RG não pode ter todos os dígitos iguais"):(f.value=!1,d.value="Formato de RG inválido"):(f.value=!1,d.value="RG deve ter entre 7 e 9 caracteres"),I.value=!1,C("validation",{valid:v,rg:u,checks:l}),v}function T(U){const u=U.target.value,l=J(u);S.value=l;const v=L(l);C("update:modelValue",v),f.value!==null&&(f.value=null,d.value="")}function W(){N(S.value)}function te(){d.value=""}return ve(()=>m.modelValue,U=>{U!==L(S.value)&&(S.value=J(U||""))},{immediate:!0}),(U,u)=>(a(),n("div",{class:A(["input-wrapper",g.value])},[r.label?(a(),n("label",{key:0,for:y.value,class:"input-label"},[z(w(r.label)+" ",1),r.required?(a(),n("span",Zl,"*")):k("",!0)],8,Ql)):k("",!0),e("div",{class:A(["input-container",j.value])},[X(e("input",{id:y.value,"onUpdate:modelValue":u[0]||(u[0]=l=>S.value=l),type:"text",placeholder:r.placeholder||"00.000.000-0",required:r.required,disabled:r.disabled,class:"input-field input-field--xs",onInput:T,onBlur:W,onFocus:te,maxlength:"12"},null,40,Xl),[[oe,S.value]]),e("div",es,[f.value===!0?(a(),n("i",ts)):f.value===!1?(a(),n("i",as)):I.value?(a(),n("i",ls)):k("",!0)])],2),d.value||r.showValidationInfo&&S.value&&f.value!==null?(a(),n("div",ss,[d.value?(a(),n("p",os,w(d.value),1)):k("",!0),r.showValidationInfo&&S.value&&f.value!==null?(a(),n("div",ns,[e("div",is,[e("div",{class:A(c.value.format?"text-green-400":"text-red-400")},[c.value.format?(a(),n("i",rs)):(a(),n("i",ds)),u[1]||(u[1]=z(" Formato válido ",-1))],2),e("div",{class:A(c.value.length?"text-green-400":"text-red-400")},[c.value.length?(a(),n("i",us)):(a(),n("i",cs)),u[2]||(u[2]=z(" Comprimento adequado ",-1))],2),e("div",{class:A(c.value.pattern?"text-green-400":"text-red-400")},[c.value.pattern?(a(),n("i",ps)):(a(),n("i",vs)),u[3]||(u[3]=z(" Padrão válido ",-1))],2)])])):k("",!0)])):k("",!0)],2))}},fs=["for"],ms={key:0,class:"text-red-500"},gs=["id","placeholder","required","disabled"],hs={class:"input-suffix"},bs={key:0,class:"fa-solid fa-check text-green-500 input-icon"},xs={key:1,class:"fa-solid fa-times text-red-500 input-icon"},ys={key:2,class:"fa-solid fa-spinner fa-spin text-slate-400 input-icon"},$s={key:1,class:"input-help"},ks={key:0,class:"input-error"},_s={key:1,class:"text-[10px] text-slate-400 mt-1"},ws={class:"bg-slate-900/50 p-2 rounded border border-slate-700/40"},Vs={class:"font-medium text-slate-300"},Cs={key:2,class:"text-[10px] text-slate-400 mt-1"},Ss={class:"space-y-0.5"},Is={key:0,class:"fa-solid fa-check mr-1"},Ps={key:1,class:"fa-solid fa-times mr-1"},As={key:0,class:"fa-solid fa-check mr-1"},Fs={key:1,class:"fa-solid fa-times mr-1"},Kt={__name:"CepInput",props:{modelValue:{type:String,default:""},label:{type:String,default:""},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},showValidationInfo:{type:Boolean,default:!1},autoFetchAddress:{type:Boolean,default:!0}},emits:["update:modelValue","validation","address"],setup(r,{emit:F}){const m=r,C=F,y=O(()=>`cep-${Math.random().toString(36).slice(2,8)}`),S=b(""),f=b(null),I=b(!1),d=b(""),c=b(null),g=b({format:!1,exists:null}),j=O(()=>{const u=[];return m.disabled&&u.push("input-wrapper--disabled"),f.value===!1&&u.push("input-wrapper--error"),f.value===!0&&u.push("input-wrapper--success"),u}),J=O(()=>{const u=[];return u.push("input-container--xs"),m.disabled&&u.push("input-container--disabled"),f.value===!1&&u.push("input-container--error"),f.value===!0&&u.push("input-container--success"),u});function L(u){const l=u.replace(/\D/g,"");return l.length<=5?l:`${l.slice(0,5)}-${l.slice(5,8)}`}function B(u){return u.replace(/\D/g,"")}async function N(u){try{const v=await(await fetch(`https://viacep.com.br/ws/${u}/json/`)).json();return v.erro?null:{cep:v.cep,logradouro:v.logradouro,complemento:v.complemento,bairro:v.bairro,localidade:v.localidade,uf:v.uf,ibge:v.ibge,gia:v.gia,ddd:v.ddd,siafi:v.siafi}}catch(l){return console.warn("Erro ao buscar CEP:",l),null}}async function T(u){if(!u.trim())return f.value=null,d.value="",c.value=null,g.value={format:!1,exists:null},null;I.value=!0;const l=B(u),v=/^\d{8}$/.test(l);if(g.value.format=v,!v)return f.value=!1,d.value="CEP deve ter 8 dígitos",c.value=null,g.value.exists=null,I.value=!1,C("validation",{valid:!1,cep:l,checks:g.value}),!1;if(m.autoFetchAddress){const h=await N(l);h?(g.value.exists=!0,c.value=h,f.value=!0,d.value="",C("address",h)):(g.value.exists=!1,c.value=null,f.value=!1,d.value="CEP não encontrado")}else g.value.exists=!0,f.value=!0,d.value="";return I.value=!1,C("validation",{valid:f.value,cep:l,address:c.value,checks:g.value}),f.value}function W(u){const l=u.target.value,v=L(l);S.value=v;const h=B(v);C("update:modelValue",h),f.value!==null&&(f.value=null,d.value="",c.value=null)}function te(){T(S.value)}function U(){d.value=""}return ve(()=>m.modelValue,u=>{u!==B(S.value)&&(S.value=L(u||""))},{immediate:!0}),(u,l)=>(a(),n("div",{class:A(["input-wrapper",j.value])},[r.label?(a(),n("label",{key:0,for:y.value,class:"input-label"},[z(w(r.label)+" ",1),r.required?(a(),n("span",ms,"*")):k("",!0)],8,fs)):k("",!0),e("div",{class:A(["input-container",J.value])},[X(e("input",{id:y.value,"onUpdate:modelValue":l[0]||(l[0]=v=>S.value=v),type:"text",placeholder:r.placeholder||"00000-000",required:r.required,disabled:r.disabled,class:"input-field input-field--xs",onInput:W,onBlur:te,onFocus:U,maxlength:"9"},null,40,gs),[[oe,S.value]]),e("div",hs,[f.value===!0?(a(),n("i",bs)):f.value===!1?(a(),n("i",xs)):I.value?(a(),n("i",ys)):k("",!0)])],2),d.value||c.value||r.showValidationInfo&&S.value&&f.value!==null?(a(),n("div",$s,[d.value?(a(),n("p",ks,w(d.value),1)):k("",!0),c.value&&f.value===!0?(a(),n("div",_s,[e("div",ws,[e("div",Vs,w(c.value.logradouro),1),e("div",null,w(c.value.bairro)+", "+w(c.value.localidade)+"/"+w(c.value.uf),1)])])):k("",!0),r.showValidationInfo&&S.value&&f.value!==null?(a(),n("div",Cs,[e("div",Ss,[e("div",{class:A(g.value.format?"text-green-400":"text-red-400")},[g.value.format?(a(),n("i",Is)):(a(),n("i",Ps)),l[1]||(l[1]=z(" Formato válido ",-1))],2),g.value.exists!==null?(a(),n("div",{key:0,class:A(g.value.exists?"text-green-400":"text-red-400")},[g.value.exists?(a(),n("i",As)):(a(),n("i",Fs)),l[2]||(l[2]=z(" CEP existe ",-1))],2)):k("",!0)])])):k("",!0)])):k("",!0)],2))}},Bs=["for"],Ds={key:0,class:"text-red-500"},Es=["id","placeholder","required","disabled"],qs={class:"input-suffix"},Ms={key:0,class:"fa-solid fa-check text-green-500 input-icon"},Us={key:1,class:"fa-solid fa-times text-red-500 input-icon"},Ns={key:2,class:"fa-solid fa-spinner fa-spin text-slate-400 input-icon"},Rs={key:1,class:"input-help"},zs={key:0,class:"input-error"},js={key:1,class:"text-[10px] text-slate-400 mt-1"},Ts={class:"bg-slate-900/50 p-2 rounded border border-slate-700/40"},Os={class:"flex items-center gap-2 text-slate-300"},Ls={class:"font-medium"},Gs={key:2,class:"text-[10px] text-slate-400 mt-1"},Js={class:"space-y-0.5"},Ks={key:0,class:"fa-solid fa-check mr-1"},Hs={key:1,class:"fa-solid fa-times mr-1"},Ws={key:0,class:"fa-solid fa-check mr-1"},Ys={key:1,class:"fa-solid fa-times mr-1"},Qs={key:0,class:"fa-solid fa-check mr-1"},Zs={key:1,class:"fa-solid fa-times mr-1"},Pt={__name:"TelefoneInput",props:{modelValue:{type:String,default:""},label:{type:String,default:""},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},showValidationInfo:{type:Boolean,default:!1}},emits:["update:modelValue","validation"],setup(r,{emit:F}){const m=r,C=F,y=O(()=>`telefone-${Math.random().toString(36).slice(2,8)}`),S=b(""),f=b(null),I=b(!1),d=b(""),c=b(null),g=b({format:!1,ddd:!1,type:!1}),j=O(()=>{const v=[];return m.disabled&&v.push("input-wrapper--disabled"),f.value===!1&&v.push("input-wrapper--error"),f.value===!0&&v.push("input-wrapper--success"),v}),J=O(()=>{const v=[];return v.push("input-container--xs"),v.push("input-container--default"),m.disabled&&v.push("input-container--disabled"),f.value===!1&&v.push("input-container--error"),f.value===!0&&v.push("input-container--success"),v}),L={11:"São Paulo - SP",12:"São José dos Campos - SP",13:"Santos - SP",14:"Bauru - SP",15:"Sorocaba - SP",16:"Ribeirão Preto - SP",17:"São José do Rio Preto - SP",18:"Presidente Prudente - SP",19:"Campinas - SP",21:"Rio de Janeiro - RJ",22:"Campos dos Goytacazes - RJ",24:"Volta Redonda - RJ",27:"Vitória - ES",28:"Cachoeiro de Itapemirim - ES",31:"Belo Horizonte - MG",32:"Juiz de Fora - MG",33:"Governador Valadares - MG",34:"Uberlândia - MG",35:"Poços de Caldas - MG",37:"Divinópolis - MG",38:"Montes Claros - MG",41:"Curitiba - PR",42:"Ponta Grossa - PR",43:"Londrina - PR",44:"Maringá - PR",45:"Cascavel - PR",46:"Francisco Beltrão - PR",47:"Joinville - SC",48:"Florianópolis - SC",49:"Chapecó - SC",51:"Porto Alegre - RS",53:"Pelotas - RS",54:"Caxias do Sul - RS",55:"Santa Maria - RS",61:"Brasília - DF",62:"Goiânia - GO",63:"Palmas - TO",64:"Rio Verde - GO",65:"Cuiabá - MT",66:"Rondonópolis - MT",67:"Campo Grande - MS",68:"Rio Branco - AC",69:"Porto Velho - RO",71:"Salvador - BA",73:"Ilhéus - BA",74:"Juazeiro - BA",75:"Feira de Santana - BA",77:"Vitória da Conquista - BA",79:"Aracaju - SE",81:"Recife - PE",82:"Maceió - AL",83:"João Pessoa - PB",84:"Natal - RN",85:"Fortaleza - CE",86:"Teresina - PI",87:"Petrolina - PE",88:"Juazeiro do Norte - CE",89:"Picos - PI",91:"Belém - PA",92:"Manaus - AM",93:"Santarém - PA",94:"Marabá - PA",95:"Boa Vista - RR",96:"Macapá - AP",97:"Coari - AM",98:"São Luís - MA",99:"Imperatriz - MA"},B=O(()=>c.value&&c.value.type==="Celular"?"fa-solid fa-mobile-screen":"fa-solid fa-phone");function N(v){const h=v.replace(/\D/g,"");return h.length<=2?h:h.length<=6?`(${h.slice(0,2)}) ${h.slice(2)}`:h.length<=10?`(${h.slice(0,2)}) ${h.slice(2,6)}-${h.slice(6)}`:`(${h.slice(0,2)}) ${h.slice(2,7)}-${h.slice(7,11)}`}function T(v){return v.replace(/\D/g,"")}function W(v){const h=T(v);if(h.length<10)return null;const M=parseInt(h.slice(0,2)),H=parseInt(h[2]);if(!L[M])return null;let P="Fixo";return(h.length===11&&H===9||h.length===10&&[6,7,8,9].includes(H))&&(P="Celular"),{type:P,ddd:M.toString().padStart(2,"0"),region:L[M],number:h,formatted:N(h)}}async function te(v){if(!v.trim())return f.value=null,d.value="",c.value=null,g.value={format:!1,ddd:!1,type:!1},null;I.value=!0,await new Promise(P=>setTimeout(P,200));const h=T(v),M=/^\d{10,11}$/.test(h);if(g.value.format=M,!M)return f.value=!1,d.value="Telefone deve ter 10 ou 11 dígitos",c.value=null,g.value.ddd=!1,g.value.type=!1,I.value=!1,C("validation",{valid:!1,phone:h,checks:g.value}),!1;const H=W(h);return H?(f.value=!0,d.value="",c.value=H,g.value.ddd=!0,g.value.type=!0):(f.value=!1,d.value="DDD inválido",c.value=null,g.value.ddd=!1,g.value.type=!1),I.value=!1,C("validation",{valid:f.value,phone:h,info:c.value,checks:g.value}),f.value}function U(v){const h=v.target.value,M=N(h);S.value=M;const H=T(M);C("update:modelValue",H),f.value!==null&&(f.value=null,d.value="",c.value=null)}function u(){te(S.value)}function l(){d.value=""}return ve(()=>m.modelValue,v=>{v!==T(S.value)&&(S.value=N(v||""))},{immediate:!0}),(v,h)=>(a(),n("div",{class:A(["input-wrapper",j.value])},[r.label?(a(),n("label",{key:0,for:y.value,class:"input-label"},[z(w(r.label)+" ",1),r.required?(a(),n("span",Ds,"*")):k("",!0)],8,Bs)):k("",!0),e("div",{class:A(["input-container",J.value])},[X(e("input",{id:y.value,"onUpdate:modelValue":h[0]||(h[0]=M=>S.value=M),type:"text",placeholder:r.placeholder||"(00) 00000-0000",required:r.required,disabled:r.disabled,class:"input-field input-field--xs",onInput:U,onBlur:u,onFocus:l,maxlength:"15"},null,40,Es),[[oe,S.value]]),e("div",qs,[f.value===!0?(a(),n("i",Ms)):f.value===!1?(a(),n("i",Us)):I.value?(a(),n("i",Ns)):k("",!0)])],2),d.value||c.value||r.showValidationInfo&&S.value&&f.value!==null?(a(),n("div",Rs,[d.value?(a(),n("p",zs,w(d.value),1)):k("",!0),c.value&&f.value===!0?(a(),n("div",js,[e("div",Ts,[e("div",Os,[e("i",{class:A([B.value,"text-sm"])},null,2),e("span",Ls,w(c.value.type)+" - "+w(c.value.region),1)])])])):k("",!0),r.showValidationInfo&&S.value&&f.value!==null?(a(),n("div",Gs,[e("div",Js,[e("div",{class:A(g.value.format?"text-green-400":"text-red-400")},[g.value.format?(a(),n("i",Ks)):(a(),n("i",Hs)),h[1]||(h[1]=z(" Formato válido ",-1))],2),e("div",{class:A(g.value.ddd?"text-green-400":"text-red-400")},[g.value.ddd?(a(),n("i",Ws)):(a(),n("i",Ys)),h[2]||(h[2]=z(" DDD válido ",-1))],2),e("div",{class:A(g.value.type?"text-green-400":"text-red-400")},[g.value.type?(a(),n("i",Qs)):(a(),n("i",Zs)),h[3]||(h[3]=z(" Tipo identificado ",-1))],2)])])):k("",!0)])):k("",!0)],2))}},Xs={class:"endereco-container space-y-1"},eo={class:"text-[12px] font-medium text-slate-300 mb-1 flex items-center gap-1"},to={key:0,class:"text-red-500"},ao={class:"space-y-1 mb-2"},lo={key:0,class:"text-red-500"},so={class:"input-container input-container--xs input-container--default"},oo=["placeholder","required","disabled"],no={key:0,class:"text-red-500"},io=["placeholder","required","disabled"],ro=["disabled"],uo={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-1"},co={class:"input-container input-container--xs input-container--default"},po=["disabled"],vo=["disabled"],fo=["disabled"],mo={class:"input-container input-container--xs input-container--default"},go=["disabled"],ho={class:"input-container input-container--xs input-container--default"},bo=["disabled"],xo={class:"address-fields space-y-1"},yo={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-1"},$o={class:"cep-field"},ko=["disabled"],_o={key:0,class:"text-red-500"},wo={class:"input-container input-container--xs input-container--default"},Vo=["required","disabled"],Co={key:0,class:"text-red-500"},So={class:"input-container input-container--xs input-container--default"},Io=["required","disabled"],Po={class:"lg:col-span-3 sm:col-span-2"},Ao={key:0,class:"text-red-500"},Fo={class:"input-container input-container--xs input-container--default"},Bo=["required","disabled"],Do={key:0,class:"text-red-500"},Eo={class:"input-container input-container--xs input-container--default"},qo=["required","disabled"],Mo={class:"input-container input-container--xs input-container--default"},Uo=["disabled"],No={key:0,class:"text-red-500"},Ro={class:"input-container input-container--xs input-container--default"},zo=["required","disabled"],jo={class:"mt-3"},To={class:"input-container input-container--textarea input-container--default"},Oo=["disabled"],Lo={class:"flex justify-between items-center mt-1"},Go={class:"text-xs text-slate-400"},Jo={__name:"EnderecoInput",props:{modelValue:{type:Object,default:()=>({})},label:{type:String,default:"Endereço"},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},autoFillFromCep:{type:Boolean,default:!0}},emits:["update:modelValue","validation","cep-found"],setup(r,{emit:F}){const m=r,C=F,y=Math.random().toString(36).slice(2,8),S=`endereco-documento-${y}`,f=`endereco-nome-${y}`,I=`endereco-email-${y}`,d=`endereco-telefone-${y}`,c=`endereco-telefone2-${y}`,g=`endereco-ie-${y}`,j=`endereco-nascimento-${y}`,J=`endereco-mae-${y}`,L=`endereco-observacoes-${y}`,B=`endereco-cep-${y}`,N=`endereco-logradouro-${y}`,T=`endereco-numero-${y}`,W=`endereco-complemento-${y}`,te=`endereco-bairro-${y}`,U=`endereco-cidade-${y}`,u=`endereco-uf-${y}`,l=b(""),v=b(null),h=b(""),M=b(""),H=b(null),P=b(""),V=b(null),E=b(""),ie=b(null),ye=b(""),pe=b(null),Le=b(!1),Ce=b(!0),q=b({documento:"",nome:"",email:"",telefone:"",telefone2:"",inscricaoEstadual:"",dataNascimento:"",nomeMae:"",observacoes:"",cep:"",logradouro:"",numero:"",complemento:"",bairro:"",cidade:"",uf:""}),K=b({cep:"",logradouro:"",numero:"",complemento:"",bairro:"",cidade:"",uf:""}),Z=O(()=>h.value==="PJ"?"CNPJ":h.value==="PF"?"CPF":"Numero Fiscal"),Be=O(()=>h.value==="PJ"?"Razão Social":h.value==="PF"?"Nome Completo":"Nome/Razão Social"),Ge=O(()=>{const p=[];return m.disabled&&p.push("input-container--disabled"),v.value===!1&&p.push("input-container--error"),v.value===!0&&p.push("input-container--success"),p}),Je=O(()=>{const p=[];return m.disabled&&p.push("input-container--disabled"),H.value===!1&&p.push("input-container--error"),H.value===!0&&p.push("input-container--success"),p}),Se=O(()=>{const p=[];return m.disabled&&p.push("input-container--disabled"),V.value===!1&&p.push("input-container--error"),V.value===!0&&p.push("input-container--success"),p}),Ke=O(()=>{const p=[];return m.disabled&&p.push("input-container--disabled"),ie.value===!1&&p.push("input-container--error"),ie.value===!0&&p.push("input-container--success"),p}),$e=O(()=>{const p=[];return m.disabled&&p.push("input-container--disabled"),pe.value===!1&&p.push("input-container--error"),pe.value===!0&&p.push("input-container--success"),p});function De(p){const s=p.replace(/\D/g,"");return s.length===11?"PF":s.length===14||s.length>=12?"PJ":s.length>=1?"PF":""}function de(p){const s=p.replace(/\D/g,"");return s.length<=11?s.length<=3?s:s.length<=6?`${s.slice(0,3)}.${s.slice(3)}`:s.length<=9?`${s.slice(0,3)}.${s.slice(3,6)}.${s.slice(6)}`:`${s.slice(0,3)}.${s.slice(3,6)}.${s.slice(6,9)}-${s.slice(9,11)}`:s.length<=2?s:s.length<=5?`${s.slice(0,2)}.${s.slice(2)}`:s.length<=8?`${s.slice(0,2)}.${s.slice(2,5)}.${s.slice(5)}`:s.length<=12?`${s.slice(0,2)}.${s.slice(2,5)}.${s.slice(5,8)}/${s.slice(8)}`:`${s.slice(0,2)}.${s.slice(2,5)}.${s.slice(5,8)}/${s.slice(8,12)}-${s.slice(12,14)}`}function dt(p){if(p=p.replace(/\D/g,""),p.length!==11||/^(\d)\1{10}$/.test(p))return!1;let s=0;for(let se=0;se<9;se++)s+=parseInt(p.charAt(se))*(10-se);let _=s*10%11;if((_===10||_===11)&&(_=0),_!==parseInt(p.charAt(9)))return!1;s=0;for(let se=0;se<10;se++)s+=parseInt(p.charAt(se))*(11-se);return _=s*10%11,(_===10||_===11)&&(_=0),_===parseInt(p.charAt(10))}function He(p){if(p=p.replace(/\D/g,""),p.length!==14||/^(\d)\1{13}$/.test(p))return!1;let s=p.length-2,_=p.substring(0,s),se=p.substring(s),me=0,be=s-7;for(let Pe=s;Pe>=1;Pe--)me+=_.charAt(s-Pe)*be--,be<2&&(be=9);let at=me%11<2?0:11-me%11;if(at!==parseInt(se.charAt(0)))return!1;s=s+1,_=p.substring(0,s),me=0,be=s-7;for(let Pe=s;Pe>=1;Pe--)me+=_.charAt(s-Pe)*be--,be<2&&(be=9);return at=me%11<2?0:11-me%11,at===parseInt(se.charAt(1))}function Ee(p){const s=p.replace(/\D/g,"");return s.length<=5?s:`${s.slice(0,5)}-${s.slice(5,8)}`}async function We(p){try{const _=await(await fetch(`https://viacep.com.br/ws/${p}/json/`)).json();return _.erro?null:{cep:_.cep,logradouro:_.logradouro,complemento:_.complemento,bairro:_.bairro,cidade:_.localidade,uf:_.uf,ibge:_.ibge,gia:_.gia,ddd:_.ddd,siafi:_.siafi}}catch(s){return console.warn("Erro ao buscar CEP:",s),null}}async function Ye(p){if(!p.trim())return pe.value=null,K.value.cep="",fe(),null;Le.value=!0;const s=p.replace(/\D/g,"");if(!/^\d{8}$/.test(s))return pe.value=!1,Le.value=!1,K.value.cep=s,fe(),!1;if(m.autoFillFromCep){const _=await We(s);_?(pe.value=!0,K.value={cep:s,logradouro:_.logradouro,numero:K.value.numero||"",complemento:_.complemento||K.value.complemento||"",bairro:_.bairro,cidade:_.cidade,uf:_.uf},fe(),C("cep-found",_)):(pe.value=!1,K.value.cep=s,fe())}else pe.value=!0,K.value.cep=s,fe();return Le.value=!1,pe.value}function ut(p){const s=p.target.value,_=de(s);l.value=_;const se=De(s);h.value!==se&&(h.value=se),Te(_)}function ct(){try{Te(l.value)}catch(p){console.warn("Erro em handleDocumentBlur:",p)}}function pt(){}function Te(p){try{if(!p||!q.value)return null;const s=p.replace(/\D/g,"");return s.trim()?(h.value==="PF"&&s.length===11?dt(s)?v.value=!0:v.value=!1:h.value==="PJ"&&s.length===14?He(s)?v.value=!0:v.value=!1:v.value=null,q.value.documento=s,ue(),v.value):(v.value=null,q.value.documento="",ue(),null)}catch(s){return console.warn("Erro em validateDocument:",s),null}}function Ie(p){const s=p.replace(/\D/g,"");return s.length<=2?s:s.length<=6?`(${s.slice(0,2)}) ${s.slice(2)}`:s.length<=10?`(${s.slice(0,2)}) ${s.slice(2,6)}-${s.slice(6)}`:`(${s.slice(0,2)}) ${s.slice(2,7)}-${s.slice(7,11)}`}function tt(p){const s=p.replace(/\D/g,"");return s.trim()?(s.length>=10&&s.length<=11?H.value=!0:s.length>11?H.value=!1:H.value=null,q.value.telefone=s,ue(),H.value):(H.value=null,q.value.telefone="",ue(),null)}function qe(p){const s=p.target.value,_=Ie(s);M.value=_,tt(_)}function Me(){tt(M.value)}function we(p){const s=p.replace(/\D/g,"");return s.trim()?(s.length>=10&&s.length<=11?V.value=!0:s.length>11?V.value=!1:V.value=null,q.value.telefone2=s,ue(),V.value):(V.value=null,q.value.telefone2="",ue(),null)}function Qe(p){const s=p.target.value,_=Ie(s);P.value=_,we(_)}function Ue(){we(P.value)}function vt(p){const s=p.replace(/\D/g,"");return s.length<=2?s:s.length<=4?`${s.slice(0,2)}/${s.slice(2)}`:`${s.slice(0,2)}/${s.slice(2,4)}/${s.slice(4,8)}`}function Ne(p){const s=p.replace(/\D/g,"");if(!s.trim())return ie.value=null,q.value.dataNascimento="",ue(),null;if(s.length===8){const _=parseInt(s.slice(0,2)),se=parseInt(s.slice(2,4)),me=parseInt(s.slice(4,8));if(_>=1&&_<=31&&se>=1&&se<=12&&me>=1900&&me<=new Date().getFullYear()){const be=new Date(me,se-1,_);be.getDate()===_&&be.getMonth()===se-1&&be.getFullYear()===me?(ie.value=!0,q.value.dataNascimento=`${s.slice(0,2)}/${s.slice(2,4)}/${s.slice(4,8)}`):(ie.value=!1,q.value.dataNascimento=p)}else ie.value=!1,q.value.dataNascimento=p}else ie.value=null,q.value.dataNascimento=p;return ue(),ie.value}function ft(p){const s=p.target.value,_=vt(s);E.value=_,Ne(_)}function mt(){Ne(E.value)}function gt(p){const s=p.target.value,_=Ee(s);ye.value=_,pe.value!==null&&(pe.value=null)}function ht(){Ye(ye.value)}function Ze(){}function ue(){try{if(!q.value)return;C("update:modelValue",{...q.value});const p=q.value.documento&&q.value.nome&&q.value.cep&&q.value.logradouro&&q.value.numero&&q.value.bairro&&q.value.cidade&&q.value.uf;C("validation",{valid:p,dados:q.value,tipoPessoa:h.value,tipoDocumento:Z.value})}catch(p){console.warn("Erro em updateDadosValue:",p)}}function fe(){q.value.cep=K.value.cep,q.value.logradouro=K.value.logradouro,q.value.numero=K.value.numero,q.value.complemento=K.value.complemento,q.value.bairro=K.value.bairro,q.value.cidade=K.value.cidade,q.value.uf=K.value.uf,ue()}return ve(()=>m.modelValue,p=>{if(!(!p||typeof p!="object"))try{q.value={...q.value,...Object.fromEntries(Object.entries(p).filter(([s,_])=>_!=null))},K.value={cep:p.cep||"",logradouro:p.logradouro||"",numero:p.numero||"",complemento:p.complemento||"",bairro:p.bairro||"",cidade:p.cidade||"",uf:p.uf||""},p.documento&&(l.value=de(p.documento),h.value=De(p.documento)),p.telefone&&(M.value=Ie(p.telefone)),p.telefone2&&(P.value=Ie(p.telefone2)),p.cep&&(ye.value=Ee(p.cep),Ce.value=!0),p.dataNascimento&&(E.value=p.dataNascimento)}catch(s){console.warn("Erro ao atualizar EnderecoInput:",s)}},{immediate:!0,deep:!0}),et(()=>{try{const p=m.modelValue;p&&typeof p=="object"&&Object.keys(p).length>0&&(q.value={...q.value,...Object.fromEntries(Object.entries(p).filter(([s,_])=>_!=null))},K.value={cep:p.cep||"",logradouro:p.logradouro||"",numero:p.numero||"",complemento:p.complemento||"",bairro:p.bairro||"",cidade:p.cidade||"",uf:p.uf||""},p.documento&&(l.value=de(p.documento),h.value=De(p.documento)),p.telefone&&(M.value=Ie(p.telefone)),p.telefone2&&(P.value=Ie(p.telefone2)),p.cep&&(ye.value=Ee(p.cep)),p.dataNascimento&&(E.value=p.dataNascimento))}catch(p){console.warn("Erro na inicialização do EnderecoInput:",p)}}),(p,s)=>(a(),n("div",Xs,[e("div",eo,[s[16]||(s[16]=e("i",{class:"fa-solid fa-building text-blue-400 text-xs"},null,-1)),z(" "+w(r.label||"Qualificação Completa")+" ",1),r.required?(a(),n("span",to,"*")):k("",!0)]),e("div",ao,[e("div",null,[e("label",{for:f,class:"text-[12px] text-slate-300"},[z(w(Be.value)+" ",1),r.required?(a(),n("span",lo,"*")):k("",!0)]),e("div",so,[X(e("input",{id:f,"onUpdate:modelValue":s[0]||(s[0]=_=>q.value.nome=_),type:"text",placeholder:Be.value==="Nome Completo"?"Nome completo da pessoa...":"Razão social da empresa...",required:r.required,disabled:r.disabled,class:"input-field input-field--xs",onInput:ue},null,40,oo),[[oe,q.value.nome]])])]),e("div",{class:A(v.value===!0&&h.value==="PF"?"grid grid-cols-1 md:grid-cols-2 gap-1":"grid grid-cols-1 gap-1")},[e("div",null,[e("label",{for:S,class:"text-[12px] text-slate-300"},[z(w(Z.value)+" ",1),r.required?(a(),n("span",no,"*")):k("",!0)]),e("div",{class:A(["input-container input-container--xs input-container--default",Ge.value])},[X(e("input",{id:S,"onUpdate:modelValue":s[1]||(s[1]=_=>l.value=_),type:"text",placeholder:h.value==="PJ"?"00.000.000/0000-00":h.value==="PF"?"000.000.000-00":"CPF ou CNPJ",required:r.required,disabled:r.disabled,class:"input-field input-field--xs",onInput:ut,onBlur:ct,onFocus:pt,maxlength:"18"},null,40,io),[[oe,l.value]])],2)]),X(e("div",null,[e("label",{for:j,class:"text-[12px] text-slate-300"},"Data de Nascimento"),e("div",{class:A(["input-container input-container--xs input-container--default",Ke.value])},[X(e("input",{id:j,"onUpdate:modelValue":s[2]||(s[2]=_=>E.value=_),type:"text",placeholder:"dd/mm/aaaa",disabled:r.disabled,class:"input-field input-field--xs",onInput:ft,onBlur:mt,maxlength:"10"},null,40,ro),[[oe,E.value]])],2)],512),[[$t,v.value===!0&&h.value==="PF"]])],2),e("div",uo,[e("div",null,[e("label",{for:I,class:"text-[12px] text-slate-300"},"E-mail"),e("div",co,[X(e("input",{id:I,"onUpdate:modelValue":s[3]||(s[3]=_=>q.value.email=_),type:"email",placeholder:"email@exemplo.com",disabled:r.disabled,class:"input-field input-field--xs",onInput:ue},null,40,po),[[oe,q.value.email]])])]),e("div",null,[e("label",{for:d,class:"text-[12px] text-slate-300"},"Celular"),e("div",{class:A(["input-container input-container--xs input-container--default",Je.value])},[X(e("input",{id:d,"onUpdate:modelValue":s[4]||(s[4]=_=>M.value=_),type:"text",placeholder:"(00) 00000-0000",disabled:r.disabled,class:"input-field input-field--xs",onInput:qe,onBlur:Me,maxlength:"15"},null,40,vo),[[oe,M.value]])],2)]),e("div",null,[e("label",{for:c,class:"text-[12px] text-slate-300"},"Fixo"),e("div",{class:A(["input-container input-container--xs input-container--default",Se.value])},[X(e("input",{id:c,"onUpdate:modelValue":s[5]||(s[5]=_=>P.value=_),type:"text",placeholder:"(00) 00000-0000",disabled:r.disabled,class:"input-field input-field--xs",onInput:Qe,onBlur:Ue,maxlength:"15"},null,40,fo),[[oe,P.value]])],2)]),X(e("div",null,[e("label",{for:g,class:"text-[12px] text-slate-300"},"Inscrição Estadual"),e("div",mo,[X(e("input",{id:g,"onUpdate:modelValue":s[6]||(s[6]=_=>q.value.inscricaoEstadual=_),type:"text",placeholder:"000.000.000.000",disabled:r.disabled,class:"input-field input-field--xs",onInput:ue},null,40,go),[[oe,q.value.inscricaoEstadual]])])],512),[[$t,h.value==="PJ"]]),X(e("div",null,[e("label",{for:J,class:"text-[12px] text-slate-300"},"Nome da Mãe"),e("div",ho,[X(e("input",{id:J,"onUpdate:modelValue":s[7]||(s[7]=_=>q.value.nomeMae=_),type:"text",placeholder:"Nome completo da mãe...",disabled:r.disabled,class:"input-field input-field--xs",onInput:ue},null,40,bo),[[oe,q.value.nomeMae]])])],512),[[$t,h.value==="PF"&&v.value===!0]])])]),e("div",xo,[e("div",yo,[e("div",$o,[e("label",{for:B,class:"text-[12px] text-slate-300"},"CEP"),e("div",{class:A(["input-container input-container--xs input-container--default",$e.value])},[X(e("input",{id:B,"onUpdate:modelValue":s[8]||(s[8]=_=>ye.value=_),type:"text",placeholder:"00000-000",disabled:r.disabled,class:"input-field input-field--xs",onInput:gt,onBlur:ht,onFocus:Ze,maxlength:"9"},null,40,ko),[[oe,ye.value]])],2)]),e("div",null,[e("label",{for:U,class:"text-[12px] text-slate-300"},[s[17]||(s[17]=z(" Cidade ",-1)),r.required?(a(),n("span",_o,"*")):k("",!0)]),e("div",wo,[X(e("input",{id:U,"onUpdate:modelValue":s[9]||(s[9]=_=>K.value.cidade=_),type:"text",placeholder:"São Paulo",required:r.required,disabled:r.disabled,class:"input-field input-field--xs",onInput:fe},null,40,Vo),[[oe,K.value.cidade]])])]),e("div",null,[e("label",{for:u,class:"text-[12px] text-slate-300"},[s[18]||(s[18]=z(" UF ",-1)),r.required?(a(),n("span",Co,"*")):k("",!0)]),e("div",So,[X(e("select",{id:u,"onUpdate:modelValue":s[10]||(s[10]=_=>K.value.uf=_),required:r.required,disabled:r.disabled,class:"input-field input-field--xs",onChange:fe},[...s[19]||(s[19]=[ka('<option value="" data-v-84888dee>UF</option><option value="AC" data-v-84888dee>AC</option><option value="AL" data-v-84888dee>AL</option><option value="AP" data-v-84888dee>AP</option><option value="AM" data-v-84888dee>AM</option><option value="BA" data-v-84888dee>BA</option><option value="CE" data-v-84888dee>CE</option><option value="DF" data-v-84888dee>DF</option><option value="ES" data-v-84888dee>ES</option><option value="GO" data-v-84888dee>GO</option><option value="MA" data-v-84888dee>MA</option><option value="MT" data-v-84888dee>MT</option><option value="MS" data-v-84888dee>MS</option><option value="MG" data-v-84888dee>MG</option><option value="PA" data-v-84888dee>PA</option><option value="PB" data-v-84888dee>PB</option><option value="PR" data-v-84888dee>PR</option><option value="PE" data-v-84888dee>PE</option><option value="PI" data-v-84888dee>PI</option><option value="RJ" data-v-84888dee>RJ</option><option value="RN" data-v-84888dee>RN</option><option value="RS" data-v-84888dee>RS</option><option value="RO" data-v-84888dee>RO</option><option value="RR" data-v-84888dee>RR</option><option value="SC" data-v-84888dee>SC</option><option value="SP" data-v-84888dee>SP</option><option value="SE" data-v-84888dee>SE</option><option value="TO" data-v-84888dee>TO</option>',28)])],40,Io),[[Bt,K.value.uf]])])]),e("div",Po,[e("label",{for:N,class:"text-[12px] text-slate-300"},[s[20]||(s[20]=z(" Logradouro ",-1)),r.required?(a(),n("span",Ao,"*")):k("",!0)]),e("div",Fo,[X(e("input",{id:N,"onUpdate:modelValue":s[11]||(s[11]=_=>K.value.logradouro=_),type:"text",placeholder:"Rua, Avenida...",required:r.required,disabled:r.disabled,class:"input-field input-field--xs",onInput:fe},null,40,Bo),[[oe,K.value.logradouro]])])]),e("div",null,[e("label",{for:T,class:"text-[12px] text-slate-300"},[s[21]||(s[21]=z(" Número ",-1)),r.required?(a(),n("span",Do,"*")):k("",!0)]),e("div",Eo,[X(e("input",{id:T,"onUpdate:modelValue":s[12]||(s[12]=_=>K.value.numero=_),type:"text",placeholder:"123",required:r.required,disabled:r.disabled,class:"input-field input-field--xs",onInput:fe},null,40,qo),[[oe,K.value.numero]])])]),e("div",null,[e("label",{for:W,class:"text-[12px] text-slate-300"},"Complemento"),e("div",Mo,[X(e("input",{id:W,"onUpdate:modelValue":s[13]||(s[13]=_=>K.value.complemento=_),type:"text",placeholder:"Apto, Bloco...",disabled:r.disabled,class:"input-field input-field--xs",onInput:fe},null,40,Uo),[[oe,K.value.complemento]])])]),e("div",null,[e("label",{for:te,class:"text-[12px] text-slate-300"},[s[22]||(s[22]=z(" Bairro ",-1)),r.required?(a(),n("span",No,"*")):k("",!0)]),e("div",Ro,[X(e("input",{id:te,"onUpdate:modelValue":s[14]||(s[14]=_=>K.value.bairro=_),type:"text",placeholder:"Centro...",required:r.required,disabled:r.disabled,class:"input-field input-field--xs",onInput:fe},null,40,zo),[[oe,K.value.bairro]])])])])]),e("div",jo,[e("label",{for:L,class:"text-[12px] text-slate-300"},"Observações"),e("div",To,[X(e("textarea",{id:L,"onUpdate:modelValue":s[15]||(s[15]=_=>q.value.observacoes=_),placeholder:"Digite suas observações (máximo 500 caracteres)...",disabled:r.disabled,class:"input-field input-field--textarea",rows:"4",maxlength:"500",onInput:ue},null,40,Oo),[[oe,q.value.observacoes]])]),e("div",Lo,[s[23]||(s[23]=e("div",{class:"text-xs text-slate-400"},"Máximo 500 caracteres",-1)),e("div",Go,w((q.value.observacoes||"").length)+"/500 ",1)])])]))}},At=Oe(Jo,[["__scopeId","data-v-84888dee"]]),Ko={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ho={class:"md:col-span-2"},Wo={class:"md:col-span-2"},Yo={class:"md:col-span-2"},Qo={class:"md:col-span-2"},Zo={class:"flex justify-end space-x-2"},Zt={__name:"PessoaFisica",props:{show:{type:Boolean,default:!1},initialData:{type:Object,default:()=>({})}},emits:["close","submit"],setup(r,{emit:F}){const m=r,C=F,y=b({nomeCompleto:"",cpf:"",rg:"",dataNascimento:"",estadoCivil:"",telefone:"",email:"",endereco:{}}),S=[{value:"solteiro",label:"Solteiro(a)"},{value:"casado",label:"Casado(a)"},{value:"divorciado",label:"Divorciado(a)"},{value:"viuvo",label:"Viúvo(a)"},{value:"separado",label:"Separado(a)"},{value:"uniao_estavel",label:"União Estável"}];ve(()=>m.initialData,I=>{I&&Object.keys(I).length>0&&(y.value={...y.value,...I})},{immediate:!0,deep:!0}),ve(()=>m.show,I=>{I&&m.initialData&&Object.keys(m.initialData).length>0&&(y.value={...y.value,...m.initialData})});const f=()=>{if(!y.value.nomeCompleto.trim()){alert("Nome completo é obrigatório");return}if(!y.value.cpf.trim()){alert("CPF é obrigatório");return}C("submit",{...y.value})};return et(()=>{m.initialData&&Object.keys(m.initialData).length>0&&(y.value={...y.value,...m.initialData})}),(I,d)=>(a(),ne(je,{"model-value":r.show,title:"Dados da Pessoa Física","container-class":"w-[90vw] max-w-2xl rounded-xl",onClose:d[9]||(d[9]=c=>I.$emit("close"))},{footer:re(()=>[e("div",Zo,[e("button",{type:"button",onClick:d[8]||(d[8]=c=>I.$emit("close")),class:"px-4 py-2 text-sm font-medium text-slate-300 bg-slate-700 hover:bg-slate-600 rounded-lg transition-colors"}," Cancelar "),e("button",{type:"button",onClick:f,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors"}," Salvar ")])]),default:re(()=>[e("form",{onSubmit:ke(f,["prevent"]),class:"space-y-4"},[e("div",Ko,[e("div",Ho,[d[10]||(d[10]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"}," Nome Completo * ",-1)),Y(Fe,{modelValue:y.value.nomeCompleto,"onUpdate:modelValue":d[0]||(d[0]=c=>y.value.nomeCompleto=c),placeholder:"Digite o nome completo",required:""},null,8,["modelValue"])]),e("div",null,[d[11]||(d[11]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"}," CPF * ",-1)),Y(St,{modelValue:y.value.cpf,"onUpdate:modelValue":d[1]||(d[1]=c=>y.value.cpf=c),required:""},null,8,["modelValue"])]),e("div",null,[d[12]||(d[12]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"}," RG ",-1)),Y(It,{modelValue:y.value.rg,"onUpdate:modelValue":d[2]||(d[2]=c=>y.value.rg=c)},null,8,["modelValue"])]),e("div",null,[d[13]||(d[13]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"}," Data de Nascimento ",-1)),Y(Fe,{modelValue:y.value.dataNascimento,"onUpdate:modelValue":d[3]||(d[3]=c=>y.value.dataNascimento=c),type:"date",placeholder:"dd/mm/aaaa"},null,8,["modelValue"])]),e("div",null,[d[14]||(d[14]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"}," Estado Civil ",-1)),Y(Ct,{modelValue:y.value.estadoCivil,"onUpdate:modelValue":d[4]||(d[4]=c=>y.value.estadoCivil=c),options:S,placeholder:"Selecione o estado civil"},null,8,["modelValue"])]),e("div",Wo,[d[15]||(d[15]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"}," Telefone ",-1)),Y(Pt,{modelValue:y.value.telefone,"onUpdate:modelValue":d[5]||(d[5]=c=>y.value.telefone=c)},null,8,["modelValue"])]),e("div",Yo,[d[16]||(d[16]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"}," Email ",-1)),Y(Fe,{modelValue:y.value.email,"onUpdate:modelValue":d[6]||(d[6]=c=>y.value.email=c),type:"email",placeholder:"email@exemplo.com"},null,8,["modelValue"])]),e("div",Qo,[d[17]||(d[17]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"}," Endereço ",-1)),Y(At,{modelValue:y.value.endereco,"onUpdate:modelValue":d[7]||(d[7]=c=>y.value.endereco=c)},null,8,["modelValue"])])])],32)]),_:1},8,["model-value"]))}},Xo={class:"relative"},en=["disabled"],tn={__name:"PessoaFisicaInput",props:{modelValue:{type:Object,default:()=>({})},placeholder:{type:String,default:"Clique para inserir dados da pessoa física"},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(r,{emit:F}){const m=r,C=F,y=b(!1),S=O(()=>{if(!m.modelValue||Object.keys(m.modelValue).length===0)return"";const{nomeCompleto:c,cpf:g}=m.modelValue;return c&&g?`${c} - CPF: ${g}`:c||(g?`CPF: ${g}`:"Dados preenchidos")}),f=()=>{m.disabled||(y.value=!0)},I=()=>{y.value=!1},d=c=>{C("update:modelValue",c),I()};return(c,g)=>(a(),n("div",Xo,[Y(Fe,{"model-value":S.value,placeholder:r.placeholder,disabled:r.disabled,required:r.required,readonly:"",onClick:f,class:"cursor-pointer bg-slate-800 hover:bg-slate-700 transition-colors"},{suffix:re(()=>[e("button",{type:"button",onClick:f,class:"text-slate-400 hover:text-white transition-colors p-1",disabled:r.disabled},[...g[0]||(g[0]=[e("i",{class:"fa-solid fa-user text-sm"},null,-1)])],8,en)]),_:1},8,["model-value","placeholder","disabled","required"]),Y(Zt,{show:y.value,"initial-data":r.modelValue||{},onClose:I,onSubmit:d},null,8,["show","initial-data"])]))}},an={key:0,class:"ff-label"},ln={key:0,class:"text-red-400"},sn={class:"ff-control"},on={key:1,class:"ff-help"},nn={key:2,class:"ff-error"},rn={__name:"FormField",props:{label:{type:String,default:""},help:{type:String,default:""},error:{type:String,default:""},required:{type:Boolean,default:!1},dense:{type:Boolean,default:!0}},setup(r){const F=r,m=O(()=>[F.dense?"ff-dense":""]);return(C,y)=>(a(),n("div",{class:A(["ff-wrapper",m.value])},[r.label?(a(),n("label",an,[z(w(r.label)+" ",1),r.required?(a(),n("span",ln,"*")):k("",!0)])):k("",!0),e("div",sn,[Wt(C.$slots,"default",{},void 0,!0)]),r.help&&!r.error?(a(),n("p",on,w(r.help),1)):k("",!0),r.error?(a(),n("p",nn,w(r.error),1)):k("",!0)],2))}},wt=Oe(rn,[["__scopeId","data-v-9e7d3744"]]);function Ft(){const r=b([]),F=b(!1),m=b(null),C=async d=>{if(!ee()){console.warn("API disabled, cannot load process files");return}F.value=!0,m.value=null;try{const c=await Ve(`/api/v1/processes/${d}/files`);r.value=c||[]}catch(c){m.value="Erro ao carregar arquivos do processo",console.error("Error loading process files:",c)}finally{F.value=!1}},y=async d=>{if(!ee())throw new Error("API disabled");try{return(await Ve("/api/v1/files/download-url",{method:"POST",body:{objectKey:d}})).url}catch{throw new Error("Erro ao gerar URL de download")}};return{files:r,loading:F,error:m,loadProcessFiles:C,downloadFile:async d=>{try{F.value=!0;const c=await y(d.objectKey),g=document.createElement("a");g.href=c,g.download=d.originalName,document.body.appendChild(g),g.click(),document.body.removeChild(g)}catch(c){m.value="Erro ao fazer download do arquivo",console.error("Download error:",c)}finally{F.value=!1}},formatFileSize:d=>{if(d===0)return"0 Bytes";const c=1024,g=["Bytes","KB","MB","GB"],j=Math.floor(Math.log(d)/Math.log(c));return parseFloat((d/Math.pow(c,j)).toFixed(2))+" "+g[j]},getFileIcon:d=>d.includes("image/")?"fa-solid fa-image text-blue-500":d.includes("pdf")?"fa-solid fa-file-pdf text-red-500":d.includes("word")?"fa-solid fa-file-word text-blue-600":d.includes("excel")||d.includes("spreadsheet")?"fa-solid fa-file-excel text-green-600":d.includes("powerpoint")?"fa-solid fa-file-powerpoint text-orange-500":d.includes("zip")||d.includes("rar")?"fa-solid fa-file-zipper text-yellow-600":"fa-solid fa-file text-slate-500"}}const dn={class:"space-y-4"},un={class:"flex items-center justify-between bg-slate-900/50 rounded-lg p-3"},cn={class:"text-sm font-medium text-slate-200"},pn={class:"text-xs text-slate-400 mt-1"},vn=["disabled"],fn={class:"flex items-center gap-2 text-xs"},mn={key:0,class:"flex items-center justify-center py-8"},gn={key:1,class:"bg-red-900/20 border border-red-700/50 rounded-lg p-3"},hn={class:"flex items-center gap-2 text-red-400"},bn={class:"text-sm"},xn={key:2,class:"text-center py-8"},yn={class:"text-slate-400 text-sm"},$n={key:3,class:"space-y-3 max-h-96 overflow-y-auto"},kn={class:"flex items-start justify-between"},_n={class:"flex items-start gap-4 min-w-0 flex-1"},wn={class:"flex-shrink-0 mt-1"},Vn={class:"min-w-0 flex-1"},Cn={class:"flex items-center gap-2 mb-2"},Sn={class:"text-sm font-medium text-slate-200 truncate"},In={class:"text-xs text-slate-500 px-2 py-0.5 bg-slate-700 rounded"},Pn={class:"flex items-center gap-4 text-xs text-slate-400 mb-2"},An={class:"flex items-center gap-1"},Fn={key:0,class:"flex items-center gap-1"},Bn={key:1,class:"flex items-center gap-1"},Dn={key:0,class:"text-xs"},En={class:"flex items-center gap-2 text-slate-400"},qn={key:0},Mn={key:0,class:"text-slate-300 mt-1 bg-slate-900/30 rounded p-2"},Un={class:"flex items-center gap-2 flex-shrink-0 ml-4"},Nn={class:"flex items-center gap-1"},Rn=["onClick","disabled"],zn=["onClick","disabled"],jn=["onClick","disabled"],Tn=["onClick","disabled","title"],On=["onClick","title"],Ln={key:0,class:"space-y-4"},Gn={class:"bg-slate-900/50 rounded-lg p-3"},Jn={class:"flex items-center gap-3 mb-3"},Kn={class:"text-sm font-medium text-slate-200"},Hn={class:"grid grid-cols-1 gap-3 text-xs"},Wn={class:"flex justify-between"},Yn={class:"text-slate-200"},Qn={class:"flex justify-between"},Zn={class:"text-slate-200"},Xn={class:"flex justify-between"},ei={class:"text-slate-200"},ti={class:"flex justify-between"},ai={key:0,class:"flex justify-between"},li={class:"text-slate-200"},si={key:1,class:"flex justify-between"},oi={class:"text-slate-200"},ni={class:"flex justify-between"},ii={class:"text-slate-200 font-mono text-xs break-all"},ri={class:"flex gap-2"},di=["disabled"],ui={__name:"ProcessFilesApprovalView",props:{show:{type:Boolean,default:!1},processKey:{type:String,required:!0},files:{type:Array,default:()=>[]}},emits:["close","refresh","approveFile","rejectFile","downloadFile"],setup(r,{emit:F}){const m=r,C=F,{formatFileSize:y,getFileIcon:S}=Ft(),f=b(!1),I=b(null),d=b("all"),c=b(!1),g=b(null),j=O(()=>m.files.map(P=>({...P,approvalStatus:P.approvalStatus||"pending",approvalBy:P.approvalBy||null,approvedAt:P.approvedAt||null,approvalNotes:P.approvalNotes||null}))),J=O(()=>d.value==="all"?j.value:j.value.filter(P=>P.approvalStatus===d.value)),L=O(()=>j.value.filter(P=>P.approvalStatus==="approved").length),B=O(()=>j.value.filter(P=>P.approvalStatus==="rejected").length),N=O(()=>j.value.filter(P=>P.approvalStatus==="pending").length),T=()=>{C("refresh")},W=P=>{I.value=P,f.value=!0},te=()=>{f.value=!1,I.value=null},U=async P=>{C("downloadFile",{file:P})},u=async(P,V)=>{console.log(`Aprovando arquivo ${P.id} por ${V}`),C("approveFile",{file:P,approvalBy:V})},l=async P=>{console.log(`Reprovando arquivo ${P.id}`),C("rejectFile",{file:P})},v=P=>{switch(P){case"approved":return"text-green-400 bg-green-900/30";case"rejected":return"text-red-400 bg-red-900/30";case"pending":return"text-yellow-400 bg-yellow-900/30";default:return"text-slate-400 bg-slate-900/30"}},h=P=>{switch(P){case"approved":return"Aprovado";case"rejected":return"Reprovado";case"pending":return"Pendente";default:return"Desconhecido"}},M=P=>{switch(P){case"approved":return"border-green-500";case"rejected":return"border-red-500";case"pending":return"border-yellow-500";default:return"border-slate-600"}},H=P=>{try{return new Date(P).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Data inválida"}};return(P,V)=>(a(),ne(je,{"model-value":r.show,title:"Arquivos do Processo","container-class":"w-[95vw] max-w-6xl rounded-xl","z-index":80,"onUpdate:modelValue":V[5]||(V[5]=E=>P.$emit("close"))},{default:re(()=>[e("div",dn,[e("div",un,[e("div",null,[e("h3",cn,"Processo: "+w(r.processKey),1),e("p",pn,w(r.files.length)+" arquivo"+w(r.files.length!==1?"s":"")+" encontrado"+w(r.files.length!==1?"s":""),1)]),e("button",{onClick:T,disabled:c.value,class:"px-3 py-1 text-xs bg-blue-600 hover:bg-blue-700 disabled:bg-slate-600 text-white rounded-md transition-colors flex items-center gap-2"},[e("i",{class:A(["fa-solid fa-refresh",{"animate-spin":c.value}])},null,2),V[6]||(V[6]=z(" Atualizar ",-1))],8,vn)]),e("div",fn,[e("button",{onClick:V[0]||(V[0]=E=>d.value="all"),class:A([d.value==="all"?"bg-orange-500 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600","px-2 py-1 rounded-md transition-colors"])}," Todos ("+w(r.files.length)+") ",3),e("button",{onClick:V[1]||(V[1]=E=>d.value="approved"),class:A([d.value==="approved"?"bg-green-500 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600","px-2 py-1 rounded-md transition-colors flex items-center gap-1"])},[V[7]||(V[7]=e("i",{class:"fa-solid fa-check"},null,-1)),z(" Aprovados ("+w(L.value)+") ",1)],2),e("button",{onClick:V[2]||(V[2]=E=>d.value="rejected"),class:A([d.value==="rejected"?"bg-red-500 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600","px-2 py-1 rounded-md transition-colors flex items-center gap-1"])},[V[8]||(V[8]=e("i",{class:"fa-solid fa-times"},null,-1)),z(" Reprovados ("+w(B.value)+") ",1)],2),e("button",{onClick:V[3]||(V[3]=E=>d.value="pending"),class:A([d.value==="pending"?"bg-yellow-500 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600","px-2 py-1 rounded-md transition-colors flex items-center gap-1"])},[V[9]||(V[9]=e("i",{class:"fa-solid fa-clock"},null,-1)),z(" Pendentes ("+w(N.value)+") ",1)],2)]),c.value&&r.files.length===0?(a(),n("div",mn,[...V[10]||(V[10]=[e("div",{class:"flex items-center gap-2 text-slate-400"},[e("i",{class:"fa-solid fa-spinner animate-spin"}),e("span",{class:"text-sm"},"Carregando arquivos...")],-1)])])):k("",!0),g.value?(a(),n("div",gn,[e("div",hn,[V[11]||(V[11]=e("i",{class:"fa-solid fa-circle-exclamation"},null,-1)),e("span",bn,w(g.value),1)])])):k("",!0),!c.value&&J.value.length===0&&!g.value?(a(),n("div",xn,[V[12]||(V[12]=e("div",{class:"text-slate-500 mb-2"},[e("i",{class:"fa-solid fa-folder-open text-4xl"})],-1)),e("p",yn,w(r.files.length===0?"Nenhum arquivo encontrado neste processo":"Nenhum arquivo corresponde ao filtro selecionado"),1)])):k("",!0),J.value.length>0?(a(),n("div",$n,[(a(!0),n(le,null,ce(J.value,E=>(a(),n("div",{key:E.id,class:A(["bg-slate-800/50 rounded-lg p-4 border-l-4",M(E.approvalStatus)])},[e("div",kn,[e("div",_n,[e("div",wn,[e("i",{class:A([_e(S)(E.contentType),"text-lg"])},null,2)]),e("div",Vn,[e("div",Cn,[e("h4",Sn,w(E.originalName),1),e("span",In,w(_e(y)(E.fileSize)),1),e("span",{class:A(["text-xs px-2 py-0.5 rounded-full font-medium",v(E.approvalStatus)])},w(h(E.approvalStatus)),3)]),e("div",Pn,[e("span",An,[V[13]||(V[13]=e("i",{class:"fa-solid fa-clock w-3"},null,-1)),z(" "+w(H(E.uploadedAt)),1)]),E.stageId?(a(),n("span",Fn,[V[14]||(V[14]=e("i",{class:"fa-solid fa-layer-group w-3"},null,-1)),z(" Etapa: "+w(E.stageId),1)])):k("",!0),E.proposalId?(a(),n("span",Bn,[V[15]||(V[15]=e("i",{class:"fa-solid fa-file-contract w-3"},null,-1)),z(" Proposta: "+w(E.proposalId),1)])):k("",!0)]),E.approvalStatus&&E.approvalStatus!=="pending"?(a(),n("div",Dn,[e("div",En,[e("i",{class:A(E.approvalBy==="AI"?"fa-solid fa-robot":"fa-solid fa-user")},null,2),e("span",null,[z(w(E.approvalBy==="AI"?"Aprovado por IA":`Aprovado por ${E.approvalBy||"Usuário"}`)+" ",1),E.approvedAt?(a(),n("span",qn," em "+w(H(E.approvedAt)),1)):k("",!0)])]),E.approvalNotes?(a(),n("p",Mn,w(E.approvalNotes),1)):k("",!0)])):k("",!0)])]),e("div",Un,[e("div",Nn,[e("button",{onClick:ie=>u(E,"AI"),disabled:c.value||E.approvalStatus==="approved",class:"px-2 py-1 text-xs bg-green-600 hover:bg-green-700 disabled:bg-slate-600 text-white rounded-md transition-colors flex items-center gap-1",title:"Aprovar por IA"},[...V[16]||(V[16]=[e("i",{class:"fa-solid fa-robot text-[10px]"},null,-1),z(" IA ",-1)])],8,Rn),e("button",{onClick:ie=>u(E,"HUMAN"),disabled:c.value||E.approvalStatus==="approved",class:"px-2 py-1 text-xs bg-blue-600 hover:bg-blue-700 disabled:bg-slate-600 text-white rounded-md transition-colors flex items-center gap-1",title:"Aprovar por Humano"},[...V[17]||(V[17]=[e("i",{class:"fa-solid fa-user text-[10px]"},null,-1),z(" Humano ",-1)])],8,zn),e("button",{onClick:ie=>l(E),disabled:c.value||E.approvalStatus==="rejected",class:"px-2 py-1 text-xs bg-red-600 hover:bg-red-700 disabled:bg-slate-600 text-white rounded-md transition-colors flex items-center gap-1",title:"Reprovar arquivo"},[...V[18]||(V[18]=[e("i",{class:"fa-solid fa-times text-[10px]"},null,-1)])],8,jn)]),V[21]||(V[21]=e("div",{class:"w-px h-6 bg-slate-600"},null,-1)),e("button",{onClick:ie=>U(E),disabled:c.value,class:"px-2 py-1 text-xs bg-orange-600 hover:bg-orange-700 disabled:bg-slate-600 text-white rounded-md transition-colors flex items-center gap-1",title:`Baixar ${E.originalName}`},[...V[19]||(V[19]=[e("i",{class:"fa-solid fa-download text-[10px]"},null,-1)])],8,Tn),e("button",{onClick:ie=>W(E),class:"px-2 py-1 text-xs bg-slate-600 hover:bg-slate-700 text-white rounded-md transition-colors flex items-center gap-1",title:`Ver detalhes de ${E.originalName}`},[...V[20]||(V[20]=[e("i",{class:"fa-solid fa-info text-[10px]"},null,-1)])],8,On)])])],2))),128))])):k("",!0)]),Y(je,{"model-value":f.value,title:"Detalhes do Arquivo","container-class":"w-[90vw] max-w-lg rounded-xl","z-index":90,"onUpdate:modelValue":te},{default:re(()=>[I.value?(a(),n("div",Ln,[e("div",Gn,[e("div",Jn,[e("i",{class:A([_e(S)(I.value.contentType),"text-2xl"])},null,2),e("h3",Kn,w(I.value.originalName),1)]),e("div",Hn,[e("div",Wn,[V[22]||(V[22]=e("span",{class:"text-slate-400"},"Tamanho:",-1)),e("span",Yn,w(_e(y)(I.value.fileSize)),1)]),e("div",Qn,[V[23]||(V[23]=e("span",{class:"text-slate-400"},"Tipo:",-1)),e("span",Zn,w(I.value.contentType),1)]),e("div",Xn,[V[24]||(V[24]=e("span",{class:"text-slate-400"},"Upload:",-1)),e("span",ei,w(H(I.value.uploadedAt)),1)]),e("div",ti,[V[25]||(V[25]=e("span",{class:"text-slate-400"},"Status:",-1)),e("span",{class:A(v(I.value.approvalStatus))},w(h(I.value.approvalStatus)),3)]),I.value.stageId?(a(),n("div",ai,[V[26]||(V[26]=e("span",{class:"text-slate-400"},"Etapa:",-1)),e("span",li,w(I.value.stageId),1)])):k("",!0),I.value.proposalId?(a(),n("div",si,[V[27]||(V[27]=e("span",{class:"text-slate-400"},"Proposta:",-1)),e("span",oi,w(I.value.proposalId),1)])):k("",!0),e("div",ni,[V[28]||(V[28]=e("span",{class:"text-slate-400"},"Chave do objeto:",-1)),e("span",ii,w(I.value.objectKey),1)])])]),e("div",ri,[e("button",{onClick:V[4]||(V[4]=E=>U(I.value)),disabled:c.value,class:"flex-1 px-4 py-2 bg-orange-600 hover:bg-orange-700 disabled:bg-slate-600 text-white rounded-lg transition-colors flex items-center justify-center gap-2"},[...V[29]||(V[29]=[e("i",{class:"fa-solid fa-download"},null,-1),z(" Baixar Arquivo ",-1)])],8,di)])])):k("",!0)]),_:1},8,["model-value"])]),_:1},8,["model-value"]))}};async function ci(r,F,m){if(!ee())throw new Error("API disabled");return await Ve("/api/v1/files/presign-upload",{method:"POST",body:{filename:r,contentType:F,prefix:m}})}async function Vt(r,F){if(!ee())throw new Error("API disabled");try{const{url:m,objectKey:C}=await ci(r.name,r.type||"application/octet-stream",F),y=await fetch(m,{method:"PUT",body:r,headers:{"Content-Type":r.type||"application/octet-stream"}});if(!y.ok)throw new Error(`Upload failed: ${y.status} ${y.statusText}`);return{objectKey:C,name:r.name,type:r.type,size:r.size}}catch(m){throw console.error("Upload error:",m),m}}function pi(){const r=b([]),F=b(!1),m=b(null),C=(d,c=[])=>{const g=[];return d.forms&&Object.keys(d.forms).forEach(j=>{const J=d.forms[j];!J||typeof J!="object"||Object.keys(J).forEach(L=>{const B=J[L];if(typeof B=="string"&&B.includes("/")){const N=B.split("/"),T=N[N.length-1]||B,W=y(T),te=c.find(u=>u.id===L),U={id:`${d._id}_${j}_${L}`,objectKey:B,fileName:T,originalName:W,fileSize:0,contentType:S(W),uploadedAt:d.updatedAt||d.createdAt||new Date().toISOString(),proposalId:d._id,stageId:j,fieldId:L,fieldLabel:te?.label||`Campo ${L}`,approvalStatus:"pending"};g.push(U)}})}),g},y=d=>{const c=/^\d+_(.+)$/,g=d.match(c);return g?g[1]:d},S=d=>{switch(d.split(".").pop()?.toLowerCase()){case"pdf":return"application/pdf";case"csv":return"text/csv";case"xlsx":case"xls":return"application/vnd.ms-excel";case"doc":case"docx":return"application/msword";case"png":return"image/png";case"jpg":case"jpeg":return"image/jpeg";case"gif":return"image/gif";case"txt":return"text/plain";default:return"application/octet-stream"}};return{files:r,loading:F,error:m,extractFilesFromProposal:C,formatFileSize:d=>{if(d===0)return"0 Bytes";const c=1024,g=["Bytes","KB","MB","GB"],j=Math.floor(Math.log(d)/Math.log(c));return parseFloat((d/Math.pow(c,j)).toFixed(2))+" "+g[j]},getFileIcon:d=>d.includes("image/")?"fa-solid fa-image text-blue-500":d.includes("pdf")?"fa-solid fa-file-pdf text-red-500":d.includes("word")?"fa-solid fa-file-word text-blue-600":d.includes("excel")||d.includes("spreadsheet")||d.includes("csv")?"fa-solid fa-file-excel text-green-600":d.includes("powerpoint")?"fa-solid fa-file-powerpoint text-orange-500":d.includes("zip")||d.includes("rar")?"fa-solid fa-file-zipper text-yellow-600":"fa-solid fa-file text-slate-500"}}const vi={class:"min-h-screen"},fi={class:"header-glass fixed top-0 left-0 right-0 lg:left-64 z-30 h-16 px-3 border-b border-slate-800/60 bg-transparent backdrop-blur-md"},mi={class:"w-full h-full grid grid-cols-2 items-center gap-2"},gi={class:"hidden sm:flex items-center"},hi={class:"flex items-center gap-2 mt-0 justify-self-end"},bi={class:"bg-slate-800/80 p-0.5 rounded-md flex items-center"},xi={class:"page-content p-3 sm:p-6"},yi={key:0,class:"overflow-x-auto kanban-scroll"},$i=["onDragover","onDragenter","onDragleave","onDropCapture","onDrop"],ki={class:"flex items-center justify-between mb-1.5"},_i={class:"flex items-center gap-2"},wi=["draggable","onDragstart"],Vi={class:"font-semibold text-xs"},Ci={key:0,class:"text-[10px] px-1.5 py-0.5 rounded-full bg-slate-700 text-slate-300 border border-slate-600/60"},Si={class:"text-[11px] text-slate-400"},Ii={class:"space-y-1.5 min-h-10"},Pi=["draggable","onDragstart","onClick"],Ai={class:"flex items-start justify-between"},Fi={class:"font-medium leading-tight text-xs"},Bi={class:"text-[11px] text-slate-300"},Di={class:"mt-1 flex items-center gap-1.5"},Ei={key:0,class:"inline-flex items-center gap-1 rounded px-1.5 py-0.5 text-[10px] font-semibold bg-red-900/60 text-red-300"},qi={key:0,class:"text-sm text-slate-400"},Mi={key:1,class:"bg-slate-800 rounded-lg"},Ui={class:"sm:hidden"},Ni={class:"divide-y divide-slate-700"},Ri={class:"flex items-start justify-between gap-2"},zi={class:"min-w-0"},ji={class:"font-medium text-sm truncate"},Ti={class:"mt-0.5 text-[12px] text-slate-300"},Oi={class:"text-[12px] text-slate-300"},Li={key:0,class:"p-3 text-slate-400 text-sm"},Gi={class:"hidden sm:block overflow-x-auto"},Ji={class:"w-full text-sm text-left"},Ki={class:"px-3 sm:px-6 py-2 sm:py-3"},Hi={class:"px-3 sm:px-6 py-2 sm:py-3"},Wi={class:"px-3 sm:px-6 py-2 sm:py-3"},Yi={class:"px-3 sm:px-6 py-2 sm:py-3"},Qi={class:"px-3 sm:px-6 py-2 sm:py-3"},Zi={class:"flex items-center gap-2 justify-end text-slate-300"},Xi=["onClick"],er=["onClick"],tr=["onClick"],ar={class:"space-y-2"},lr={class:"bg-slate-800/30 rounded-lg p-4 border border-slate-700/40"},sr={class:"text-xs text-slate-400"},or={class:"inline-flex items-center gap-2"},nr={class:"bg-slate-800/30 rounded-lg p-4 border border-slate-700/40"},ir={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},rr={key:0},dr={key:8,class:"text-[11px] text-red-400 mt-1"},ur={class:"space-y-3 mt-4 pt-4 border-t border-slate-700/40"},cr={key:0,class:"w-full"},pr={key:0,class:"text-[11px] text-red-400 mt-1"},vr={class:"space-y-3 mt-4"},fr={key:0,class:"w-full"},mr={key:0,class:"text-[11px] text-red-400 mt-1"},gr={key:1,class:"w-full"},hr={key:0,class:"text-[11px] text-red-400 mt-1"};const br={class:"space-y-2"},xr={class:"flex items-center justify-between"},yr={class:"grid grid-cols-1 md:grid-cols-2 gap-2 flex-1"},$r={class:"text-[12px] text-slate-100"},kr={class:"text-xs"},_r={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},wr={key:0},Vr={class:"space-y-3"},Cr={key:0,class:"w-full"},Sr={key:1,class:"w-full"},Ir={key:2,class:"w-full"},Pr={class:"flex items-center gap-2"},Ar=["onClick"],Fr={key:0,class:"text-[12px] text-green-300"},Br={key:1,class:"text-[12px] text-slate-300"},Dr={class:"flex items-center justify-between gap-2"},Er={class:"flex items-center gap-2"},qr={class:"relative"},Mr=["value"],Ur={class:"flex items-center gap-2"},rt="application/x-stage-id",Nr="consoria_chat_history",Rr={__name:"index",props:{pipelineKey:{type:String,default:"quotaequity"}},setup(r){_a({title:"Esteira"});const F=r,m=O(()=>F.pipelineKey||"quotaequity"),{openModal:C}=Ia(),y=b(!1),S=b("");pi();const{files:f,loadProcessFiles:I,downloadFile:d}=Ft(),c=b(!1);et(()=>{try{c.value="ontouchstart"in window||navigator&&(navigator.maxTouchPoints||0)>0}catch{c.value=!1}});const g=b([]),j=b(0);async function J(){try{const{fetchStagesApi:o}=await Nt(async()=>{const{fetchStagesApi:$}=await import("./BFT2zYfe.js").then(t=>t.i);return{fetchStagesApi:$}},__vite__mapDeps([0,1,2,3,4]),import.meta.url),{isApiEnabled:i}=await Nt(async()=>{const{isApiEnabled:$}=await import("./Dbx-Jqc8.js");return{isApiEnabled:$}},__vite__mapDeps([1,2,3,4]),import.meta.url);if(i()){const $=await o(m.value);if(Array.isArray($)){g.value=$.map(t=>({id:t.id||t.key||t._id||(t.title||"").toLowerCase().replace(/\s+/g,"_"),title:t.title||t.name||"Etapa",slaDays:Number(t.slaDays??0),color:t.color||"sky",status:"Offline"}));return}}}catch{}try{const o=localStorage.getItem(`pipeline_config__${m.value}`);if(console.log(">>>>>>>>",o),o){const i=JSON.parse(o);if(Array.isArray(i)){const $=Object.fromEntries(g.value.map(t=>[t.id,t.status]));g.value=i.map(t=>({id:t.id,title:t.title,slaDays:t.slaDays??0,color:t.color||"sky",status:$[t.id]||"Offline"}))}}}catch{}W()}async function L(){if(ee())try{const o=await _t(m.value);Array.isArray(o)&&(B.value=o)}catch{}}et(async()=>{J(),L();try{window.addEventListener("focus",L)}catch{}try{De.value=await Fa(),de.value=await Rt("ESTEIRA"),wa(()=>{console.log("Status colors loaded (ESTEIRA category):",de.value.length,"items")})}catch(o){console.error("Failed to load status options:",o),De.value=["Api Offline"],de.value=[]}}),Va(()=>{try{window.removeEventListener("focus",L)}catch{}}),Ca(()=>{L()}),ve(()=>m.value,()=>{J(),qt(),xt(),ee()&&_t(m.value).then(o=>{Array.isArray(o)&&(B.value=o)}).catch(()=>{})});const B=b(jt(m.value)||[]);ve(()=>m.value,o=>{const i=jt(o);B.value=Array.isArray(i)?i:[],ee()&&_t(o).then($=>{Array.isArray($)&&(B.value=$)}).catch(()=>{})});const N=()=>{try{kt(m.value,B.value)}catch{}};function T(o){try{return String(o||"").replace(/_/g," ").replace(/\b\w/g,$=>$.toUpperCase())}catch{return o}}function W(){const o=new Set(g.value.map($=>$.id)),i=new Set;for(const $ of B.value)$?.stageId&&!o.has($.stageId)&&i.add($.stageId);if(i.size){const $=Array.from(i).map(t=>({id:t,title:T(t),slaDays:0,status:"Offline",color:"sky",auto:!0}));g.value=g.value.concat($)}}ve(()=>B.value.map(o=>o.stageId).join("|"),()=>W());const te=b(""),U=b(""),u=b(!1),l=b("kanban"),v=O(()=>B.value.filter(o=>{const i=o.name.toLowerCase().includes(te.value.toLowerCase()),$=!U.value||o.status===U.value,t=u.value?!0:!o.isArchived;return i&&$&&t}));async function h(o){q.value=o;try{K.value=await zt(String(o.stageId))}catch{K.value=[]}if(Z.value={},ee())try{const i=await Ea(m.value,String(o.id));Z.value=i&&i[String(o.stageId)]?{...i[String(o.stageId)]}:{}}catch{}try{o.processExternalId&&await I(o.processExternalId)}catch(i){console.warn("Failed to load process files:",i)}$e.value=o.status||"Offline";try{de.value=await Rt("ESTEIRA"),console.log("Status options refreshed on card open (ESTEIRA category):",de.value.length,"items")}catch(i){console.error("Failed to refresh status options:",i)}Ce.value=!0}async function M(){const o=q.value;if(!o){Ce.value=!1;return}try{ee()&&await Ot(m.value,String(o.id),String(o.stageId),Z.value)}catch{}Ce.value=!1}function H(o){Ge.value=o,Be.value=!0}function P(){Be.value=!1,Ge.value=null}async function V(){const o=Ge.value;if(!o)return P();const i=B.value.slice();B.value=B.value.filter($=>$.id!==o.id);try{ee()?await qa(m.value,String(o.id))||(B.value=i):N()}catch{B.value=i}P()}async function E(){const o=q.value;if(!o)return;const i=o.status,{success:$,error:t}=Ae();o.status=$e.value;const x=B.value.findIndex(D=>D.id===o.id);x!==-1&&(B.value[x].status=$e.value);try{ee()?(await Lt(m.value,String(o.id),{status:$e.value}),$("Status atualizado com sucesso!")):(N(),$("Status atualizado!"))}catch(D){console.error("Failed to update proposal status:",D),t("Erro ao atualizar status. Tente novamente."),o.status=i;const R=B.value.findIndex(xe=>xe.id===o.id);R!==-1&&(B.value[R].status=i)}}function ie(o,i=.2){const $=parseInt(o.slice(1,3),16),t=parseInt(o.slice(3,5),16),x=parseInt(o.slice(5,7),16);return`rgba(${$}, ${t}, ${x}, ${i})`}function ye(o){if(!o||!de.value.length)return null;const i=de.value.find(t=>t.name===o);if(i?.color)return ie(i.color,.6);const $=de.value.find(t=>t.name?.toLowerCase()===o.toLowerCase());return $?.color?ie($.color,.2):null}function pe(o){if(!o||!de.value.length)return"";const i=de.value.find($=>$.name===o);if(i?.color){const $=i.color;return`background-color: ${ie($,.1)}; color: ${$}; --tw-ring-color: ${ie($,.3)};`}return""}function Le(o){h(o)}const Ce=b(!1),q=b(null),K=b([]),Z=b({}),Be=b(!1),Ge=b(null),Je=b(!1),Se=b(null),Ke=b(!1),$e=b(""),De=b([]),de=b([]);Ft();const dt=O(()=>f.value.length),He=o=>v.value.filter(i=>i.stageId===o),Ee=o=>g.value.find(i=>i.id===o)?.title||o,We=o=>{if(ye(o))return"ring-1 ring-inset transition-colors";if(!o)return"bg-slate-700 text-slate-300 ring-1 ring-inset ring-slate-500/20"},Ye={sky:{border:"border-sky-500",strip:"bg-sky-500",badge:"bg-sky-900/50 text-sky-300 ring-1 ring-inset ring-sky-500/20"},indigo:{border:"border-indigo-500",strip:"bg-indigo-500",badge:"bg-indigo-900/50 text-indigo-300 ring-1 ring-inset ring-indigo-500/20"},amber:{border:"border-amber-500",strip:"bg-amber-500",badge:"bg-amber-900/50 text-amber-300 ring-1 ring-inset ring-amber-500/20"},rose:{border:"border-rose-500",strip:"bg-rose-500",badge:"bg-rose-900/50 text-rose-300 ring-1 ring-inset ring-rose-500/20"},green:{border:"border-green-500",strip:"bg-green-500",badge:"bg-green-900/50 text-green-300 ring-1 ring-inset ring-green-500/20"},purple:{border:"border-purple-500",strip:"bg-purple-500",badge:"bg-purple-900/50 text-purple-300 ring-1 ring-inset ring-purple-500/20"},blue:{border:"border-blue-500",strip:"bg-blue-500",badge:"bg-blue-900/50 text-blue-300 ring-1 ring-inset ring-blue-500/20"},orange:{border:"border-orange-500",strip:"bg-orange-500",badge:"bg-orange-900/50 text-orange-300 ring-1 ring-inset ring-orange-500/20"},teal:{border:"border-teal-500",strip:"bg-teal-500",badge:"bg-teal-900/50 text-teal-300 ring-1 ring-inset ring-teal-500/20"},cyan:{border:"border-cyan-500",strip:"bg-cyan-500",badge:"bg-cyan-900/50 text-cyan-300 ring-1 ring-inset ring-cyan-500/20"},lime:{border:"border-lime-500",strip:"bg-lime-500",badge:"bg-lime-900/50 text-lime-300 ring-1 ring-inset ring-lime-500/20"},emerald:{border:"border-emerald-500",strip:"bg-emerald-500",badge:"bg-emerald-900/50 text-emerald-300 ring-1 ring-inset ring-emerald-500/20"},fuchsia:{border:"border-fuchsia-500",strip:"bg-fuchsia-500",badge:"bg-fuchsia-900/50 text-fuchsia-300 ring-1 ring-inset ring-fuchsia-500/20"},violet:{border:"border-violet-500",strip:"bg-violet-500",badge:"bg-violet-900/50 text-violet-300 ring-1 ring-inset ring-violet-500/20"},pink:{border:"border-pink-500",strip:"bg-pink-500",badge:"bg-pink-900/50 text-pink-300 ring-1 ring-inset ring-pink-500/20"},red:{border:"border-red-500",strip:"bg-red-500",badge:"bg-red-900/50 text-red-300 ring-1 ring-inset ring-red-500/20"},yellow:{border:"border-yellow-500",strip:"bg-yellow-500",badge:"bg-yellow-900/50 text-yellow-300 ring-1 ring-inset ring-yellow-500/20"},slate:{border:"border-slate-500",strip:"bg-slate-500",badge:"bg-slate-900/50 text-slate-300 ring-1 ring-inset ring-slate-500/20"},stone:{border:"border-stone-500",strip:"bg-stone-500",badge:"bg-stone-900/50 text-stone-300 ring-1 ring-inset ring-stone-500/20"},zinc:{border:"border-zinc-500",strip:"bg-zinc-500",badge:"bg-zinc-900/50 text-zinc-300 ring-1 ring-inset ring-zinc-500/20"}},ut=o=>{const i=g.value.find($=>$.id===o);return i&&Ye[i.color]?.border||"border-slate-500"},ct=o=>{const i=g.value.find($=>$.id===o);return i&&Ye[i.color]?.strip||"bg-slate-500"},pt=o=>{const i=g.value.find($=>$.id===o);return i&&Ye[i.color]?.badge||"bg-slate-700 text-slate-300 ring-1 ring-inset ring-slate-500/20"},Te=o=>{const $=g.value.find(ae=>ae.id===o.stageId)?.slaDays??0;if(!$||!o.stageEnteredAt)return{days:0,sla:$,remaining:0,status:"ok"};const t=new Date(o.stageEnteredAt),x=new Date,D=1440*60*1e3,R=Math.max(0,Math.ceil((x.getTime()-t.getTime())/D)),xe=$-R;let G="ok";return R>$?G="overdue":R>=Math.max(1,Math.floor($*.8))&&(G="warning"),{days:R,sla:$,remaining:xe,status:G}},Ie=o=>{const{status:i}=Te(o);return i==="overdue"?"bg-red-900/60 text-red-300":i==="warning"?"bg-amber-900/60 text-amber-300":"bg-slate-700 text-slate-300"},tt=o=>{const{days:i,sla:$}=Te(o);return $?`${i}/${$}d`:"SLA N/A"},qe=b(null),Me=b(""),we=b(""),Qe=b(-1),Ue=O(()=>!!we.value),vt=(o,i)=>{qe.value=i.id,o?.dataTransfer&&(o.dataTransfer.effectAllowed="move",o.dataTransfer.setData("text/plain",String(i.id)))},Ne=()=>{qe.value=null,Me.value=""},ft=o=>{Ue.value||(Me.value=o)},mt=o=>{Ue.value||Me.value===o&&(Me.value="")},gt=o=>{if(Ue.value||!qe.value)return;const i=B.value.findIndex(R=>R.id===qe.value);if(i===-1)return Ne();const $=g.value.find(R=>R.id===o);if(!$)return Ne();const t=$.defaultStatus&&$.defaultStatus.trim()!==""?$.defaultStatus:B.value[i].status||"Offline",x={...B.value[i],stageId:o,status:t,stageEnteredAt:new Date().toISOString()},D=B.value.slice();if(D[i]=x,B.value=D,ee()){const R=String(x.id),xe=B.value[i];Lt(m.value,R,{stageId:o,status:t}).catch(()=>{const G=B.value.slice();G[i]={...xe},B.value=G})}else N();Ne()};function ht(o,i,$){if(we.value=i.id,o?.dataTransfer){o.dataTransfer.effectAllowed="move";try{o.dataTransfer.setData(rt,i.id)}catch{}}}function Ze(){we.value="",Qe.value=-1}function ue(o,i){!we.value||!Array.from(o?.dataTransfer?.types||[]).includes(rt)||(o.preventDefault(),Qe.value=i)}function fe(){if(ee()){const{success:o,error:i}=Ae(),$=g.value.map(t=>({id:t.id,title:t.title}));Ba(m.value,$,g.value).then(t=>{if(Array.isArray(t)&&t.length){const D={};try{g.value.forEach(R=>{D[R.title]=R.status||"Offline"})}catch{}g.value=t.map(R=>({id:R.id,title:R.title,slaDays:R.slaDays,color:R.color,status:D[R.title]||"Offline"}))}const x=Date.now();x-j.value>1500&&(o("Colunas atualizadas"),j.value=x)}).catch(()=>i("Falha ao salvar colunas"));return}try{localStorage.setItem(`pipeline_config__${m.value}`,JSON.stringify(g.value))}catch{}}function p(o,i){if(!Array.from(o?.dataTransfer?.types||[]).includes(rt))return;o.preventDefault(),o.stopPropagation();const t=o.dataTransfer.getData(rt)||we.value,x=g.value.findIndex(xe=>xe.id===t);if(x<0||i<0||x===i){Ze();return}const D=g.value.slice(),[R]=D.splice(x,1);D.splice(i,0,R),g.value=D,fe(),Ze()}const s=b(!1),_=["AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"],se=["TOCO","LANCE","AMAURI","Tramonta","Fraga & Bitello","SI","Larban","DW Consórcios"],me=["CREMONA","SAVEL","FOUR CAPITAL","VALOR","LARBAN"],be=["ConsorEquity","Fundo Inter","Flex","Outro"],at=["Itaú","HS","Bradesco"],Pe=["Imóvel","Veículo","Aplicação","Outro"],zr=["Compra de imóvel","Reforma","Capital de giro","Outros"],Xt=["Sem representante","Ana","Bruno","Carlos"],ea=["Sem gerente","Juliana Rezende","Rafael Santos","Carla Lima"],Re=b({name:"",cpf:"",cep:"",city:"",state:"",administrator:"",bank:"",fund:"",productType:"",summary:"",startDate:"",amountDesired:0,guaranteeValue:0,guaranteeType:"",objective:"",representative:Xt[0],manager:ea[0],stageId:g.value[0]?.id||"dados_basicos"}),ta=b({name:"",cpf:"",amountDesired:""}),aa=()=>{g.value[0]?.id,xt(),C({stages:g.value,stageFields:ge.value,pipelineKey:m.value,onSave:i=>{ra(i)}});const{info:o}=Ae();ge.value.length>0?o(`Carregados ${ge.value.length} campos da primeira etapa: ${g.value[0]?.title||"Primeira Etapa"}`):o(`Abrindo formulário da primeira etapa: ${g.value[0]?.title||"Primeira Etapa"}`)},la=()=>{Ke.value=!0},sa=async()=>{if(q.value&&q.value.processExternalId)try{await I(q.value.processExternalId)}catch(o){console.warn("Failed to refresh process files:",o)}},oa=({file:o,approvalBy:i})=>{console.log(`Aprovando arquivo ${o.id} por ${i}`);const{success:$}=Ae();$(`Arquivo "${o.originalName}" aprovado por ${i}`)},na=({file:o})=>{console.log(`Reprovando arquivo ${o.id}`);const{warning:i}=Ae();i(`Arquivo "${o.originalName}" reprovado`)},ia=async({file:o})=>{try{await d(o)}catch(i){const{error:$}=Ae();$(`Erro ao baixar arquivo "${o.originalName}"`),console.error("Download error:",i)}},ra=o=>{const{success:i}=Ae();g.value.find(x=>x.id===o.stageId);const $=Date.now().toString(),t={id:$,name:o.name,amount:o.amount,stageId:o.stageId,status:o.status,isArchived:!1,stageEnteredAt:new Date().toISOString(),stageValues:o.fieldValues||{},files:o.fieldFiles||{}};if(B.value.push(t),kt(m.value,B.value),ee()){const x={name:o.name,amount:o.amount,stageId:o.stageId,status:o.status};console.log("Creating proposal via API with payload:",x),Tt(m.value,x).then(async D=>{if(D?.id){const R=String(D.id),xe=B.value.findIndex(G=>G.id===$);xe>=0&&(B.value[xe].id=R,kt(m.value,B.value));for(const[G,ae]of Object.entries(o.fieldFiles||{}))if(ae&&ae.length>0)try{await Vt(R,ae[0])}catch(nt){console.warn(`Erro ao fazer upload do arquivo ${G}:`,nt)}}i("Registro criado com sucesso!")}).catch(D=>{console.error("Erro ao criar registro via API:",D),D("Erro ao salvar registro na API, mantido localmente")})}else i("Registro criado com sucesso!")},Dt=()=>{s.value=!1},da=()=>(ta.value={name:"",cpf:"",amountDesired:""},!0),ua=()=>{const{warning:o}=Ae();da(),he.value={};let i=!0;for(const G of ge.value)G?.required&&(G.type==="file"?ot.value?.[G.id]?.length||(he.value[G.id]="Obrigatório",i=!1):(Q.value?.[G.id]??"").toString().trim()||(he.value[G.id]="Obrigatório",i=!1));if(!i){ca.value=!0,o("Preencha os campos obrigatórios da etapa");return}const $=g.value.find(G=>G.id===Re.value.stageId);console.log("Creating new card - Stage found:",$,"defaultStatus:",$?.defaultStatus);const t=G=>{const ae=String(G||"").trim();if(!ae)return 0;const nt=ae.replace(/\./g,"").replace(/,/g,"."),Xe=Number(nt);return isNaN(Xe)?0:Xe},x=()=>{for(const ae of ge.value)if((ae.label||"").toLowerCase().includes("nome")){const Xe=(Q.value?.[ae.id]||"").toString().trim();if(Xe)return Xe}const G=ge.value.find(ae=>ae.type==="text");return(G?(Q.value?.[G.id]||"").toString().trim():"")||"Registro"},D=()=>{for(const G of ge.value)if(G.type==="number"){const ae=(G.label||"").toLowerCase();if(ae.includes("valor")||ae.includes("amount")||ae.includes("preço")||ae.includes("preco"))return t(Q.value?.[G.id])}return 0},R={name:x(),amount:D(),stageId:Re.value.stageId,status:$?.defaultStatus||"Offline"},xe=(()=>{const G={};try{for(const ae of ge.value)G[ae.id]=Q.value?.[ae.id]??""}catch{}return G})();if(ee())Tt(m.value,R).then(async G=>{if(G){try{await Ot(m.value,String(G.id),String(G.stageId),xe)}catch{}B.value=[G,...B.value]}}).catch(()=>{});else{const G=Date.now();B.value.unshift({id:G,name:R.name,amount:R.amount,stageId:R.stageId,status:R.status,isArchived:!1,stageEnteredAt:new Date().toISOString(),details:void 0}),N()}Dt()},bt=b(!1),lt=b(""),ca=b(!1),Et=b("");ve(()=>Re.value.cep,o=>{const i=String(o||"").replace(/\D/g,"");i.length===8&&i!==Et.value&&!bt.value&&(Et.value=i,pa()),i.length<8&&(lt.value="")});const pa=async()=>{lt.value="";const o=(Re.value.cep||"").replace(/\D/g,"");if(o.length!==8){lt.value="Informe 8 dígitos";return}bt.value=!0;try{const i=await $fetch("/api/cep?cep="+o);i&&(Re.value.city=i.city||"",Re.value.state=i.state||"")}catch(i){lt.value=i?.statusMessage||"Erro ao buscar CEP"}finally{bt.value=!1}},jr=b([]),st=b({}),ge=b([]),Q=b({}),ot=b({}),he=b({});function qt(){try{const o=localStorage.getItem(`pipeline_stage_forms__${m.value}`);o&&(st.value=JSON.parse(o)||{})}catch{st.value={}}}function xt(){const o=Re.value.stageId,i=()=>{const t=Array.isArray(st.value[o])?st.value[o]:[];ge.value=t;const x={};t.forEach(D=>{D.type!=="file"&&(x[D.id]="")}),Q.value=x,ot.value={},he.value={}},$=typeof o=="string"&&/^[a-fA-F0-9]{24}$/.test(o);ee()&&$?zt(o).then(t=>{const x=Array.isArray(t)?t.map(R=>({id:R.id||R.label,label:R.label,type:R.type,required:!!R.required,placeholder:R.placeholder||"",options:Array.isArray(R.options)?R.options:[]})):[];ge.value=x;const D={};x.forEach(R=>{R.type!=="file"&&(D[R.id]="")}),Q.value=D,ot.value={},he.value={}}).catch(()=>i()):i()}function va(o,i){ot.value[o]=i;try{if(ee()){const $=Array.from(i||[]);console.log("Uploading files:",$.map(t=>t.name)),Promise.all($.map(t=>Vt(t,"proposals/tmp"))).then(t=>{console.log("Upload success:",t);const x=t.map(D=>D.objectKey);Q.value[o]=$.length<=1?x[0]:x}).catch(t=>{console.error("Upload failed:",t);const x=$.map(D=>D.name);Q.value[o]=$.length<=1?x[0]:x})}}catch($){console.error("onExtraFile error:",$)}}function fa(o,i){try{if(ee()){const $=Array.from(i||[]);Promise.all($.map(t=>Vt(t,`proposals/${q.value?.id||"unknown"}`))).then(t=>{const x=t.map(D=>D.objectKey);Z.value[o]=$.length<=1?x[0]:x}).catch(()=>{})}}catch{}}et(()=>{qt(),xt()});const Mt=b(!1),ze=b([{role:"assistant",content:"Olá! Eu sou a ConsorIA. Como posso ajudar hoje?"}]),yt=b(!1),ma=o=>{Se.value=o,Je.value=!0},Ut=()=>{Je.value=!1},ga=async o=>{try{Se.value&&(Z.value[Se.value]=o),Ut(),Se.value=null}catch(i){console.error("Erro ao salvar qualificação:",i)}},ha=async({text:o,attachments:i})=>{ze.value.push({role:"user",content:o,attachments:i}),yt.value=!0;try{const $=ze.value.slice(-8).map(x=>({role:x.role,content:x.content})),t=await $fetch("/api/ai",{method:"POST",body:{text:o,attachments:i,history:$}});ze.value.push({role:"assistant",content:t?.text||t?.message||"Sem resposta."})}catch{ze.value.push({role:"assistant",content:"Falha ao obter resposta da IA. Verifique sua configuração."})}finally{yt.value=!1}};return ve(()=>ze.value.length,()=>{try{localStorage.setItem(Nr,JSON.stringify(ze.value.slice(-50)))}catch{}}),(o,i)=>{const $=Pa("AiSearch");return a(),n("div",vi,[e("header",fi,[e("div",mi,[e("div",gi,[Y(Aa,{size:"sm"})]),e("div",hi,[e("div",bi,[e("button",{onClick:i[0]||(i[0]=t=>l.value="kanban"),class:A([l.value==="kanban"?"bg-orange-500 text-white":"text-slate-300 hover:bg-slate-700/80","px-2 py-0.5 rounded-md text-[11px] font-medium transition-colors flex items-center gap-1"])},[...i[30]||(i[30]=[e("i",{class:"fa-solid fa-grip-vertical"},null,-1),z(" Kanban ",-1)])],2),e("button",{onClick:i[1]||(i[1]=t=>l.value="list"),class:A([l.value==="list"?"bg-orange-500 text-white":"text-slate-300 hover:bg-slate-700/80","px-2 py-0.5 rounded-md text-[11px] font-medium transition-colors flex items-center gap-1"])},[...i[31]||(i[31]=[e("i",{class:"fa-solid fa-list"},null,-1),z(" Lista ",-1)])],2)]),e("button",{onClick:aa,class:"bg-orange-500 hover:bg-orange-600 text-white font-medium px-2.5 py-1 rounded-md transition-colors flex items-center gap-1 text-xs"},[...i[32]||(i[32]=[e("i",{class:"fa-solid fa-plus text-[10px]"},null,-1),e("span",{class:"hidden sm:inline"},"Novo Registro",-1)])])])])]),e("main",xi,[l.value==="kanban"?(a(),n("div",yi,[Y(Sa,{name:"kanban-col",tag:"div",class:"grid grid-flow-col auto-cols-[14rem] sm:auto-cols-[15rem] md:auto-cols-[16rem] gap-3 min-h-[10rem] pb-2"},{default:re(()=>[(a(!0),n(le,null,ce(g.value,(t,x)=>(a(),n("div",{key:t.id,class:A(["w-full bg-slate-800 rounded-md p-1.5 transition-colors",[Me.value===t.id?"ring-2 ring-blue-400 ring-offset-0":"",Ue.value&&Qe.value===x?"ring-2 ring-orange-400":"",Ue.value&&we.value===t.id?"opacity-90":""]]),onDragover:ke(D=>ue(D,x),["prevent"]),onDragenter:ke(D=>ft(t.id),["prevent"]),onDragleave:D=>mt(t.id),onDropCapture:D=>p(D,x),onDrop:D=>gt(t.id)},[e("div",{class:A(["h-1 rounded-md mb-2",ct(t.id)])},null,2),e("div",ki,[e("div",_i,[e("button",{class:"text-slate-300/80 hover:text-white px-1 py-0.5 rounded",title:"Reordenar coluna",draggable:!c.value,onDragstart:D=>ht(D,t,x),onDragend:Ze},[...i[33]||(i[33]=[e("i",{class:"fa-solid fa-grip-vertical"},null,-1)])],40,wi),e("h3",Vi,w(t.title),1),t.auto?(a(),n("span",Ci,"auto")):k("",!0),e("span",Si,"SLA "+w(t.slaDays)+"d",1)]),e("span",{class:A(["text-[10px] font-semibold px-2 py-0.5 rounded-full",pt(t.id)])},w(He(t.id).length),3)]),e("div",Ii,[(a(!0),n(le,null,ce(He(t.id),D=>(a(),n("div",{key:D.id,class:A(["bg-slate-700 rounded-md p-1.5 shadow-sm cursor-move border-l-4",[qe.value===D.id?"opacity-60":"",ut(D.stageId)]]),draggable:!c.value,onDragstart:R=>vt(R,D),onClick:R=>h(D),onDragend:Ne},[e("div",Ai,[e("div",null,[e("div",Fi,w(D.name),1),e("div",Bi," R$ "+w(D.amount.toLocaleString("pt-BR")),1)]),e("span",{class:A([We(D.status),"text-[10px] font-semibold px-2 py-1 rounded-md"]),style:it(pe(D.status))},w(D.status),7)]),e("div",Di,[e("span",{class:A(["inline-flex items-center gap-1 rounded px-1.5 py-0.5 text-[10px] font-semibold",Ie(D)])},[i[34]||(i[34]=e("i",{class:"fa-regular fa-calendar"},null,-1)),z(" "+w(tt(D)),1)],2),Te(D).status==="overdue"?(a(),n("span",Ei,[...i[35]||(i[35]=[e("i",{class:"fa-solid fa-flag"},null,-1),z(" Atraso ",-1)])])):k("",!0)])],42,Pi))),128)),He(t.id).length===0?(a(),n("div",qi," Sem propostas ")):k("",!0)])],42,$i))),128))]),_:1})])):(a(),n("div",Mi,[e("div",Ui,[e("ul",Ni,[(a(!0),n(le,null,ce(v.value,t=>(a(),n("li",{key:t.id,class:"p-3"},[e("div",Ri,[e("div",zi,[e("div",ji,w(t.name),1),e("div",Ti," Valor: R$ "+w(t.amount.toLocaleString("pt-BR")),1),e("div",Oi," Etapa: "+w(Ee(t.stageId)),1)]),e("span",{class:A([We(t.status),"flex-shrink-0 text-[10px] font-semibold px-2 py-1 rounded-md"]),style:it(pe(t.status))},w(t.status),7)])]))),128))]),v.value.length===0?(a(),n("div",Li," Sem registros ")):k("",!0)]),e("div",Gi,[e("table",Ji,[i[39]||(i[39]=e("thead",{class:"bg-slate-700/60 text-xs text-slate-300 uppercase"},[e("tr",null,[e("th",{class:"px-3 sm:px-6 py-2 sm:py-3"},"Cliente"),e("th",{class:"px-3 sm:px-6 py-2 sm:py-3"},"Valor"),e("th",{class:"px-3 sm:px-6 py-2 sm:py-3"},"Etapa"),e("th",{class:"px-3 sm:px-6 py-2 sm:py-3"},"Status"),e("th",{class:"px-3 sm:px-6 py-2 sm:py-3 text-right"},"Ações")])],-1)),e("tbody",null,[(a(!0),n(le,null,ce(v.value,t=>(a(),n("tr",{key:t.id,class:"border-b border-slate-700 hover:bg-slate-700/50"},[e("td",Ki,w(t.name),1),e("td",Hi," R$ "+w(t.amount.toLocaleString("pt-BR")),1),e("td",Wi,w(Ee(t.stageId)),1),e("td",Yi,[e("span",{class:A([We(t.status),"text-xs font-semibold px-2 py-1 rounded-md"]),style:it(pe(t.status))},w(t.status),7)]),e("td",Qi,[e("div",Zi,[e("button",{class:"hover:text-white",title:"Ver/Editar",onClick:x=>h(t)},[...i[36]||(i[36]=[e("i",{class:"fa-regular fa-pen-to-square"},null,-1)])],8,Xi),e("button",{class:"hover:text-white",title:"Mover",onClick:x=>Le(t)},[...i[37]||(i[37]=[e("i",{class:"fa-solid fa-arrow-right-arrow-left"},null,-1)])],8,er),e("button",{class:"text-red-400 hover:text-red-300",title:"Excluir",onClick:x=>H(t)},[...i[38]||(i[38]=[e("i",{class:"fa-regular fa-trash-can"},null,-1)])],8,tr)])])]))),128))])])])]))]),Y(je,{modelValue:s.value,"onUpdate:modelValue":i[21]||(i[21]=t=>s.value=t),title:"Novo Registro",size:"xxl","body-class":"new-proposal-modal"},{footer:re(()=>[e("div",{class:"flex items-center justify-end gap-2"},[e("button",{class:"bg-slate-700 hover:bg-slate-600 text-white px-2 py-1 rounded-md text-xs",onClick:Dt}," Cancelar "),e("button",{class:"bg-orange-500 hover:bg-orange-600 text-white px-2 py-1 rounded-md text-xs",onClick:ua},[...i[46]||(i[46]=[e("i",{class:"fa-solid fa-check mr-1"},null,-1),z("Salvar ",-1)])])])]),default:re(()=>[e("div",ar,[e("div",lr,[i[40]||(i[40]=e("h4",{class:"text-sm font-semibold text-slate-200 mb-3"}," Nova Proposta ",-1)),e("div",sr,[e("span",or,[e("span",{class:A(["w-2 h-4 rounded-full",o.getStageColor(g.value[0]?.id)])},null,2),z(" Etapa: "+w(g.value[0]?.title||"Primeira Etapa"),1)])])]),e("div",nr,[i[41]||(i[41]=e("h4",{class:"text-sm font-semibold text-slate-200 mb-3"}," Campos do Processo ",-1)),e("div",ir,[(a(!0),n(le,null,ce(ge.value,t=>(a(),n(le,{key:t.id},[t.type!=="file"&&t.type!=="endereco"&&t.type!=="pessoa_fisica"?(a(),n("div",rr,[t.type==="text"||t.type==="number"?(a(),ne(Fe,{key:0,modelValue:Q.value[t.id],"onUpdate:modelValue":x=>Q.value[t.id]=x,type:(t.type==="number","text"),numeric:t.type==="number",label:t.label,size:"xs",placeholder:t.placeholder||""},null,8,["modelValue","onUpdate:modelValue","type","numeric","label","placeholder"])):t.type==="cpf"?(a(),ne(St,{key:1,modelValue:Q.value[t.id],"onUpdate:modelValue":x=>Q.value[t.id]=x,label:t.label,placeholder:t.placeholder||"000.000.000-00",required:t.required,"show-validation-info":!0},null,8,["modelValue","onUpdate:modelValue","label","placeholder","required"])):t.type==="cnpj"?(a(),ne(Jt,{key:2,modelValue:Q.value[t.id],"onUpdate:modelValue":x=>Q.value[t.id]=x,label:t.label,placeholder:t.placeholder||"00.000.000/0000-00",required:t.required,"show-validation-info":!0},null,8,["modelValue","onUpdate:modelValue","label","placeholder","required"])):t.type==="rg"?(a(),ne(It,{key:3,modelValue:Q.value[t.id],"onUpdate:modelValue":x=>Q.value[t.id]=x,label:t.label,placeholder:t.placeholder||"00.000.000-0",required:t.required,"show-validation-info":!0},null,8,["modelValue","onUpdate:modelValue","label","placeholder","required"])):t.type==="cep"?(a(),ne(Kt,{key:4,modelValue:Q.value[t.id],"onUpdate:modelValue":x=>Q.value[t.id]=x,label:t.label,placeholder:t.placeholder||"00000-000",required:t.required,"show-validation-info":!0,"auto-fetch-address":!0},null,8,["modelValue","onUpdate:modelValue","label","placeholder","required"])):t.type==="telefone"?(a(),ne(Pt,{key:5,modelValue:Q.value[t.id],"onUpdate:modelValue":x=>Q.value[t.id]=x,label:t.label,placeholder:t.placeholder||"(00) 00000-0000",required:t.required,"show-validation-info":!0},null,8,["modelValue","onUpdate:modelValue","label","placeholder","required"])):t.type==="date"?(a(),ne(Fe,{key:6,modelValue:Q.value[t.id],"onUpdate:modelValue":x=>Q.value[t.id]=x,type:"date",label:t.label,size:"xs"},null,8,["modelValue","onUpdate:modelValue","label"])):t.type==="select"?(a(),ne(Ct,{key:7,modelValue:Q.value[t.id],"onUpdate:modelValue":x=>Q.value[t.id]=x,label:t.label,size:"xs",options:(t.options||[]).map(x=>({label:x,value:x}))},null,8,["modelValue","onUpdate:modelValue","label","options"])):k("",!0),he.value[t.id]?(a(),n("div",dr,w(he.value[t.id]),1)):k("",!0)])):k("",!0)],64))),128))]),e("div",ur,[(a(!0),n(le,null,ce(ge.value,t=>(a(),n(le,{key:t.id},[t.type==="file"?(a(),n("div",cr,[Y(wt,{label:t.label,dense:!0},{default:re(()=>[Y(Gt,{onFiles:x=>va(t.id,x)},null,8,["onFiles"])]),_:2},1032,["label"]),he.value[t.id]?(a(),n("div",pr,w(he.value[t.id]),1)):k("",!0)])):k("",!0)],64))),128))]),e("div",vr,[(a(!0),n(le,null,ce(ge.value,t=>(a(),n(le,{key:t.id},[t.type==="endereco"?(a(),n("div",fr,[Y(At,{modelValue:Q.value[t.id],"onUpdate:modelValue":x=>Q.value[t.id]=x,label:t.label,required:t.required},null,8,["modelValue","onUpdate:modelValue","label","required"]),he.value[t.id]?(a(),n("div",mr,w(he.value[t.id]),1)):k("",!0)])):t.type==="pessoa_fisica"?(a(),n("div",gr,[Y(tn,{modelValue:Q.value[t.id],"onUpdate:modelValue":x=>Q.value[t.id]=x,label:t.label,required:t.required},null,8,["modelValue","onUpdate:modelValue","label","required"]),he.value[t.id]?(a(),n("div",hr,w(he.value[t.id]),1)):k("",!0)])):k("",!0)],64))),128))])]),k("",!0),k("",!0),k("",!0),k("",!0),k("",!0)])]),_:1},8,["modelValue"]),Y(je,{modelValue:Be.value,"onUpdate:modelValue":i[22]||(i[22]=t=>Be.value=t),title:"Excluir Registro",size:"sm","z-index":80},{footer:re(()=>[e("div",{class:"flex items-center justify-end gap-2"},[e("button",{class:"bg-slate-700 hover:bg-slate-600 text-white px-2 py-1 rounded-md text-xs",onClick:P}," Cancelar "),e("button",{class:"bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded-md text-xs",onClick:V}," Excluir ")])]),default:re(()=>[i[47]||(i[47]=e("p",{class:"text-sm text-slate-200"}," Tem certeza que deseja excluir este registro? ",-1))]),_:1},8,["modelValue"]),Y(je,{modelValue:Ce.value,"onUpdate:modelValue":i[25]||(i[25]=t=>Ce.value=t),title:"Formulário da Etapa",size:"max","z-index":70},{footer:re(()=>[e("div",Dr,[e("div",Er,[i[50]||(i[50]=e("label",{class:"text-xs text-slate-300"},"Status:",-1)),e("div",qr,[X(e("select",{"onUpdate:modelValue":i[23]||(i[23]=t=>$e.value=t),class:"bg-slate-800/70 border border-slate-700/60 text-slate-200 rounded-md px-2 py-1 text-xs min-w-[120px] pr-8",onChange:E},[(a(!0),n(le,null,ce(de.value.length?de.value:De.value.map(t=>({name:t})),t=>(a(),n("option",{key:t.name||t,value:t.name||t},w(t.name||t),9,Mr))),128))],544),[[Bt,$e.value]]),ye($e.value)?(a(),n("div",{key:0,class:"absolute right-2 top-1/2 transform -translate-y-1/2 w-2 h-2 rounded-full pointer-events-none",style:it({backgroundColor:ye($e.value)})},null,4)):k("",!0)])]),e("div",Ur,[e("button",{class:"bg-slate-700 hover:bg-slate-600 text-white px-2 py-1 rounded-md text-xs",onClick:i[24]||(i[24]=t=>Ce.value=!1)}," Fechar "),e("button",{class:"bg-orange-500 hover:bg-orange-600 text-white px-2 py-1 rounded-md text-xs",onClick:M}," Salvar ")])])]),default:re(()=>[e("div",br,[e("div",xr,[e("div",yr,[i[48]||(i[48]=e("div",{class:"text-[12px] text-slate-300"},"Etapa atual",-1)),e("div",$r,w(Ee(q.value?.stageId)),1)]),q.value?(a(),n("button",{key:0,onClick:la,class:"text-slate-400 hover:text-slate-200 flex items-center gap-2 px-2 py-1 rounded-md hover:bg-slate-700/50 transition-colors text-sm ml-4",title:"Ver arquivos do processo"},[i[49]||(i[49]=e("i",{class:"fa-solid fa-folder-open text-sm"},null,-1)),e("span",kr,w(dt.value),1)])):k("",!0)]),e("div",_r,[(a(!0),n(le,null,ce(K.value,t=>(a(),n(le,{key:t.id},[t.type!=="file"&&t.type!=="endereco"&&t.type!=="pessoa_fisica"?(a(),n("div",wr,[t.type==="text"||t.type==="number"?(a(),ne(Fe,{key:0,modelValue:Z.value[t.id],"onUpdate:modelValue":x=>Z.value[t.id]=x,type:(t.type==="number","text"),numeric:t.type==="number",label:t.label,size:"xs",placeholder:t.placeholder||""},null,8,["modelValue","onUpdate:modelValue","type","numeric","label","placeholder"])):t.type==="cpf"?(a(),ne(St,{key:1,modelValue:Z.value[t.id],"onUpdate:modelValue":x=>Z.value[t.id]=x,label:t.label,placeholder:t.placeholder||"000.000.000-00",required:t.required,"show-validation-info":!0},null,8,["modelValue","onUpdate:modelValue","label","placeholder","required"])):t.type==="cnpj"?(a(),ne(Jt,{key:2,modelValue:Z.value[t.id],"onUpdate:modelValue":x=>Z.value[t.id]=x,label:t.label,placeholder:t.placeholder||"00.000.000/0000-00",required:t.required,"show-validation-info":!0},null,8,["modelValue","onUpdate:modelValue","label","placeholder","required"])):t.type==="rg"?(a(),ne(It,{key:3,modelValue:Z.value[t.id],"onUpdate:modelValue":x=>Z.value[t.id]=x,label:t.label,placeholder:t.placeholder||"00.000.000-0",required:t.required,"show-validation-info":!0},null,8,["modelValue","onUpdate:modelValue","label","placeholder","required"])):t.type==="cep"?(a(),ne(Kt,{key:4,modelValue:Z.value[t.id],"onUpdate:modelValue":x=>Z.value[t.id]=x,label:t.label,placeholder:t.placeholder||"00000-000",required:t.required,"show-validation-info":!0,"auto-fetch-address":!0},null,8,["modelValue","onUpdate:modelValue","label","placeholder","required"])):t.type==="telefone"?(a(),ne(Pt,{key:5,modelValue:Z.value[t.id],"onUpdate:modelValue":x=>Z.value[t.id]=x,label:t.label,placeholder:t.placeholder||"(00) 00000-0000",required:t.required,"show-validation-info":!0},null,8,["modelValue","onUpdate:modelValue","label","placeholder","required"])):t.type==="date"?(a(),ne(Fe,{key:6,modelValue:Z.value[t.id],"onUpdate:modelValue":x=>Z.value[t.id]=x,type:"date",label:t.label,size:"xs"},null,8,["modelValue","onUpdate:modelValue","label"])):t.type==="select"?(a(),ne(Ct,{key:7,modelValue:Z.value[t.id],"onUpdate:modelValue":x=>Z.value[t.id]=x,label:t.label,size:"xs",options:(t.options||[]).map(x=>({label:x,value:x}))},null,8,["modelValue","onUpdate:modelValue","label","options"])):k("",!0)])):k("",!0)],64))),128))]),e("div",Vr,[(a(!0),n(le,null,ce(K.value,t=>(a(),n(le,{key:t.id},[t.type==="file"?(a(),n("div",Cr,[Y(wt,{label:t.label,dense:!0},{default:re(()=>[Y(Gt,{onFiles:x=>fa(t.id,x)},null,8,["onFiles"])]),_:2},1032,["label"])])):t.type==="endereco"?(a(),n("div",Sr,[Y(At,{modelValue:Z.value[t.id],"onUpdate:modelValue":x=>Z.value[t.id]=x,label:t.label,required:t.required,"auto-fill-from-cep":!0},null,8,["modelValue","onUpdate:modelValue","label","required"])])):t.type==="pessoa_fisica"?(a(),n("div",Ir,[Y(wt,{label:t.label,dense:!0},{default:re(()=>[e("div",Pr,[e("button",{type:"button",class:"bg-slate-700 hover:bg-slate-600 text-white px-2 py-1 rounded-md text-xs",onClick:x=>ma(t.id)}," Preencher Pessoa Física ",8,Ar),Z.value[t.id]?(a(),n("span",Fr,"Preenchido")):(a(),n("span",Br,"Não preenchido"))])]),_:2},1032,["label"])])):k("",!0)],64))),128))])])]),_:1},8,["modelValue"]),Y(tl,{show:Mt.value,"onUpdate:show":i[26]||(i[26]=t=>Mt.value=t),messages:ze.value,typing:yt.value,title:"ConsorIA",size:"sm",onSend:ha},null,8,["show","messages","typing"]),Y(je,{modelValue:y.value,"onUpdate:modelValue":i[28]||(i[28]=t=>y.value=t),title:"Pesquisar",size:"sm","z-index":80},{default:re(()=>[Y($,{modelValue:S.value,"onUpdate:modelValue":i[27]||(i[27]=t=>S.value=t),"persist-on-click":!1},null,8,["modelValue"])]),_:1},8,["modelValue"]),Y(Zt,{show:Je.value,initialData:Se.value?Z.value[Se.value]||{}:{},onClose:Ut,onSubmit:ga},null,8,["show","initialData"]),Y(ui,{show:Ke.value,"process-key":q.value?.processExternalId||m.value,files:_e(f),onClose:i[29]||(i[29]=t=>Ke.value=!1),onRefresh:sa,onApproveFile:oa,onRejectFile:na,onDownloadFile:ia},null,8,["show","process-key","files"])])}}},Wr=Oe(Rr,[["__scopeId","data-v-73c6f9e6"]]);export{Wr as default};
