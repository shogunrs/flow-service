import{f as h,A as g}from"./qcAyaCsh.js";import{u as w,a as d}from"./CV9EyYCX.js";function l(){const t=h()?.public?.FLOW_API_BASE||"";return String(t||"")}function S(){return!!l()}async function y(e,t={}){const o=l();if(!o)throw new Error("FLOW_API_BASE not set");const r=e.startsWith("http")?e:`${o.replace(/\/$/,"")}${e.startsWith("/")?"":"/"}${e}`,s=t.silent===!0;delete t.silent;const{inc:u,dec:f}=w();s||u();try{return await $fetch(r,t)}catch(n){try{const a=(t?.method||"GET").toString().toUpperCase(),m=a!=="GET",i=d("api-last-error-toast",()=>0),c=Date.now();if(m&&c-i.value>2e3){i.value=c;const{error:A}=g();console.warn("[Flow] API error for",a,r,n?.message||n),A("Falha de conex√£o com a API. Tente novamente.")}}catch{}throw n}finally{s||f()}}export{y as apiFetch,l as getApiBase,S as isApiEnabled};
